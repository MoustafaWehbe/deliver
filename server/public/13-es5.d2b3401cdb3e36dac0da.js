function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var c=t[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{Xlj8:function(e,t,r){"use strict";r.r(t),r.d(t,"OrdersModule",(function(){return Bt}));var c=r("ofXK"),i=r("bTqV"),a=r("Wp6s"),n=r("wZkO"),o=r("NFeN"),s=r("/t3+"),l=r("STbY"),d=r("+0xr"),u=r("bSwM"),m=r("M9IT"),p=r("qFsG"),f=r("kmnG"),h=r("bv9b"),v=r("0IaG"),g=r("d3UM"),b=r("3Pt+"),y=r("/1cH"),D=r("iadO"),C=r("CV0D"),E=r("pxUr"),O=r("tyNb"),k=r("fXoL"),w=r("foWl"),_=r("ZF+8"),x=r("0MCZ"),S=r("mrSG"),P=r("0EQZ"),M=r("V3S8"),F=r("5eHb"),W=r("QibW");function I(e,t){1&e&&k.zc(0,"mat-progress-bar",8)}function j(e,t){if(1&e&&(k.Ec(0,"mat-radio-button",9),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.Wc("value",r),k.lc(1),k.od(" ",r.name," ")}}var R,L=((R=function(){function e(t,r,c){_classCallCheck(this,e),this.branchesService=t,this.dialogRef=r,this.toastService=c,this.isLoading=!1,this.branches=[],this.selectedBranch=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.initPage()}},{key:"initPage",value:function(){var e=this;this.isLoading=!0,this.branchesService.getBranches().subscribe((function(t){e.branches=t.data,e.isLoading=!1}),(function(t){return e.isLoading=!1}))}},{key:"close",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogRef.close({selectedBranch:e?this.selectedBranch:null})}}]),e}()).\u0275fac=function(e){return new(e||R)(k.yc(M.a),k.yc(v.h),k.yc(F.b))},R.\u0275cmp=k.sc({type:R,selectors:[["app-branches-modal"]],decls:11,vars:4,consts:[[1,"mat-typography"],["mode","indeterminate",4,"ngIf"],["id","example-radio-group-label"],["aria-labelledby","example-radio-group-label","name","bList",1,"example-radio-group",3,"ngModel","ngModelChange"],["class","example-radio-button","name","bList",3,"value",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close","click"],["mode","indeterminate"],["name","bList",1,"example-radio-button",3,"value"]],template:function(e,t){1&e&&(k.Ec(0,"mat-dialog-content",0),k.ld(1,I,1,0,"mat-progress-bar",1),k.Ec(2,"label",2),k.md(3,"select a branch: "),k.Dc(),k.Ec(4,"mat-radio-group",3),k.Mc("ngModelChange",(function(e){return t.selectedBranch=e})),k.ld(5,j,2,2,"mat-radio-button",4),k.Dc(),k.Dc(),k.Ec(6,"mat-dialog-actions",5),k.Ec(7,"button",6),k.Mc("click",(function(){return t.close(!1)})),k.md(8,"Cancel"),k.Dc(),k.Ec(9,"button",7),k.Mc("click",(function(){return t.close(!0)})),k.md(10,"Select"),k.Dc(),k.Dc()),2&e&&(k.lc(1),k.Wc("ngIf",t.isLoading),k.lc(3),k.Wc("ngModel",t.selectedBranch),k.lc(1),k.Wc("ngForOf",t.branches),k.lc(4),k.Wc("mat-dialog-close",!0))},directives:[v.f,c.l,W.b,b.m,b.p,c.k,v.c,i.a,v.d,h.a,W.a],styles:[".example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),R),B=r("JX91"),T=r("lJxs"),A=r("x3QV"),N=r("FKr1");function z(e,t){1&e&&k.zc(0,"mat-progress-bar",11)}function $(e,t){if(1&e&&(k.Ec(0,"mat-option",12),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.Wc("value",r),k.lc(1),k.od(" ",r.name," ")}}var Q,q=((Q=function(){function e(t,r,c){_classCallCheck(this,e),this.driversService=t,this.dialogRef=r,this.toastService=c,this.isLoading=!1,this.drivers=[],this.selectedBranch="",this.myControl=new b.d}return _createClass(e,[{key:"ngOnInit",value:function(){this.initPage()}},{key:"initPage",value:function(){return Object(S.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,this.driversService.getDrivers().toPromise().then((function(e){t.drivers=e.data,t.isLoading=!1}),(function(e){return t.isLoading=!1}));case 3:this.filteredOptions=this.myControl.valueChanges.pipe(Object(B.a)(""),Object(T.a)((function(e){return t._filter(e)})));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"_filter",value:function(e){var t="";return e&&(t=e.name.toLowerCase()),this.drivers.filter((function(e){return e.name.toLowerCase().includes(t)}))}},{key:"getDisplayName",value:function(e){if(e)return e.name}},{key:"close",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.myControl.value.id?this.dialogRef.close({selectedDriver:e?this.myControl.value:null}):this.toastService.warning("Please select one of the available drivers.")}}]),e}()).\u0275fac=function(e){return new(e||Q)(k.yc(A.a),k.yc(v.h),k.yc(F.b))},Q.\u0275cmp=k.sc({type:Q,selectors:[["app-drivers-select-modal"]],decls:16,vars:8,consts:[[1,"mat-typography"],["mode","indeterminate",4,"ngIf"],[1,"example-form"],[1,"example-full-width"],["type","text","placeholder","pick one","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close","click"],["mode","indeterminate"],[3,"value"]],template:function(e,t){if(1&e&&(k.Ec(0,"mat-dialog-content",0),k.ld(1,z,1,0,"mat-progress-bar",1),k.Ec(2,"form",2),k.Ec(3,"mat-form-field",3),k.Ec(4,"mat-label"),k.md(5,"Select a driver"),k.Dc(),k.zc(6,"input",4),k.Ec(7,"mat-autocomplete",5,6),k.ld(9,$,2,2,"mat-option",7),k.Rc(10,"async"),k.Dc(),k.Dc(),k.Dc(),k.Dc(),k.Ec(11,"mat-dialog-actions",8),k.Ec(12,"button",9),k.Mc("click",(function(){return t.close(!1)})),k.md(13,"Cancel"),k.Dc(),k.Ec(14,"button",10),k.Mc("click",(function(){return t.close(!0)})),k.md(15,"Select"),k.Dc(),k.Dc()),2&e){var r=k.cd(8);k.lc(1),k.Wc("ngIf",t.isLoading),k.lc(5),k.Wc("formControl",t.myControl)("matAutocomplete",r),k.lc(1),k.Wc("displayWith",t.getDisplayName),k.lc(2),k.Wc("ngForOf",k.Sc(10,6,t.filteredOptions)),k.lc(5),k.Wc("mat-dialog-close",!1)}},directives:[v.f,c.l,b.u,b.n,b.o,f.b,f.f,p.b,b.b,y.c,b.m,b.e,y.a,c.k,v.c,i.a,v.d,h.a,N.l],pipes:[c.b],styles:[".example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),Q),U=r("+CeZ");function J(e,t){1&e&&k.zc(0,"mat-progress-bar",11)}function H(e,t){if(1&e&&(k.Ec(0,"mat-option",12),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.Wc("value",r),k.lc(1),k.od(" ",r.companyName," ")}}var G,K=((G=function(){function e(t,r,c){_classCallCheck(this,e),this.userServiceService=t,this.dialogRef=r,this.toastService=c,this.isLoading=!1,this.users=[],this.selectedBranch="",this.myControl=new b.d}return _createClass(e,[{key:"ngOnInit",value:function(){this.initPage()}},{key:"initPage",value:function(){return Object(S.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,this.userServiceService.getUsers().toPromise().then((function(e){t.users=e.data.users,t.isLoading=!1}),(function(e){return t.isLoading=!1}));case 3:this.filteredOptions=this.myControl.valueChanges.pipe(Object(B.a)(""),Object(T.a)((function(e){return t._filter(e)})));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"_filter",value:function(e){var t="";return e&&(t=e.companyName.toLowerCase()),this.users.filter((function(e){return e.companyName.toLowerCase().includes(t)&&e.roles&&e.roles[0]&&"client"==e.roles[0].name}))}},{key:"getDisplayName",value:function(e){if(e)return e.companyName}},{key:"close",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.myControl.value||this.myControl.value.id?this.dialogRef.close({selectedCompany:e?this.myControl.value:null}):this.toastService.warning("Please select one of the available companies.")}}]),e}()).\u0275fac=function(e){return new(e||G)(k.yc(U.a),k.yc(v.h),k.yc(F.b))},G.\u0275cmp=k.sc({type:G,selectors:[["app-companies-select-modal"]],decls:16,vars:8,consts:[[1,"mat-typography"],["mode","indeterminate",4,"ngIf"],[1,"example-form"],[1,"example-full-width"],["type","text","placeholder","pick one","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close","click"],["mode","indeterminate"],[3,"value"]],template:function(e,t){if(1&e&&(k.Ec(0,"mat-dialog-content",0),k.ld(1,J,1,0,"mat-progress-bar",1),k.Ec(2,"form",2),k.Ec(3,"mat-form-field",3),k.Ec(4,"mat-label"),k.md(5,"Select a company"),k.Dc(),k.zc(6,"input",4),k.Ec(7,"mat-autocomplete",5,6),k.ld(9,H,2,2,"mat-option",7),k.Rc(10,"async"),k.Dc(),k.Dc(),k.Dc(),k.Dc(),k.Ec(11,"mat-dialog-actions",8),k.Ec(12,"button",9),k.Mc("click",(function(){return t.close(!1)})),k.md(13,"Cancel"),k.Dc(),k.Ec(14,"button",10),k.Mc("click",(function(){return t.close(!0)})),k.md(15,"Select"),k.Dc(),k.Dc()),2&e){var r=k.cd(8);k.lc(1),k.Wc("ngIf",t.isLoading),k.lc(5),k.Wc("formControl",t.myControl)("matAutocomplete",r),k.lc(1),k.Wc("displayWith",t.getDisplayName),k.lc(2),k.Wc("ngForOf",k.Sc(10,6,t.filteredOptions)),k.lc(5),k.Wc("mat-dialog-close",!1)}},directives:[v.f,c.l,b.u,b.n,b.o,f.b,f.f,p.b,b.b,y.c,b.m,b.e,y.a,c.k,v.c,i.a,v.d,h.a,N.l],pipes:[c.b],styles:[".example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),G),V=r("KJae"),Z=r("MfUg"),X=r("vzMs");function Y(e,t){if(1&e&&(k.Ec(0,"mat-option",25),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.Wc("value",r),k.lc(1),k.od(" ",r," ")}}function ee(e,t){if(1&e&&(k.Ec(0,"mat-option",25),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.Wc("value",r),k.lc(1),k.nd(r)}}function te(e,t){if(1&e&&(k.Ec(0,"mat-option",25),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.Wc("value",r.id),k.lc(1),k.nd(r.name)}}function re(e,t){if(1&e&&(k.Ec(0,"mat-option",25),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.Wc("value",r),k.lc(1),k.nd(r)}}function ce(e,t){if(1&e&&(k.Ec(0,"mat-option",25),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.Wc("value",r.id),k.lc(1),k.nd(r.name)}}function ie(e,t){if(1&e&&(k.Ec(0,"mat-form-field",3),k.Ec(1,"mat-label"),k.md(2,"Branch"),k.Dc(),k.Ec(3,"mat-select",26),k.ld(4,ce,2,2,"mat-option",9),k.Dc(),k.Dc()),2&e){var r=k.Qc();k.Wc("floatLabel","auto"),k.lc(4),k.Wc("ngForOf",r.branches)}}function ae(e,t){if(1&e&&(k.Ec(0,"mat-option",25),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.Wc("value",r.id),k.lc(1),k.nd(r.companyName)}}function ne(e,t){if(1&e&&(k.Ec(0,"mat-form-field",3),k.Ec(1,"mat-label"),k.md(2,"Company"),k.Dc(),k.Ec(3,"mat-select",27),k.ld(4,ae,2,2,"mat-option",9),k.Dc(),k.Dc()),2&e){var r=k.Qc();k.Wc("floatLabel","auto"),k.lc(4),k.Wc("ngForOf",r.users)}}function oe(e,t){if(1&e&&(k.Ec(0,"mat-option",28),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.Wc("disabled",r.disabled)("value",r.value),k.lc(1),k.od("",r.value," ")}}var se,le=((se=function(){function e(t,r,c,i,a,n,o,s,l){_classCallCheck(this,e),this.branchesService=t,this.driverService=r,this.ordersService=c,this.usersService=i,this.authService=a,this.fb=n,this.dialogRef=o,this.data=s,this.toastService=l,this.isLoading=!1,this.branches=[],this.drivers=[],this.users=[],this.selectedBranch="",this.isSubmittingForm=!1,this.userRole="",this.statuses=[{value:"pending",disabled:!1},{value:"assigned",disabled:!1},{value:"spotOrder",disabled:!1},{value:"finished",disabled:!1},{value:"returned",disabled:!1}],this.serviceType=[],this.currency=["LL","$","cheque(LL)","cheque($)"],this.addressLocations=[],this.addressesControl=new b.d,this.mainObj=s}return _createClass(e,[{key:"ngOnInit",value:function(){this.initPage()}},{key:"initPage",value:function(){return Object(S.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.userRole=this.authService.currentUserRole(),this.serviceType=this.ordersService.serviceTypes,this.addressLocations=this.ordersService.addressLocations,this.ordersForm=new b.g({shipmentCode:new b.d("update"==this.mainObj.action?this.mainObj.order.shipmentCode:"",[b.t.required,b.t.minLength(4)]),weight:new b.d("update"==this.mainObj.action?this.mainObj.order.weight:"1 Kg",[b.t.required]),receiverName:new b.d("update"==this.mainObj.action?this.mainObj.order.receiverName:"",[b.t.required]),receiverPhone:new b.d("update"==this.mainObj.action?this.mainObj.order.receiverPhone:"",[b.t.required]),receiverAddress:new b.d("update"==this.mainObj.action?this.mainObj.order.receiverAddress:"",[b.t.required]),receiverLandmark:new b.d("update"==this.mainObj.action?this.mainObj.order.receiverLandmark:"",[b.t.required]),fees:new b.d({disabled:"update"===this.mainObj.action&&"admin"!=this.userRole,value:"update"==this.mainObj.action?this.mainObj.order.fees:""},[b.t.required]),currency:new b.d("update"==this.mainObj.action?this.mainObj.order.currency:this.currency[0],[b.t.required]),serviceType:new b.d("update"==this.mainObj.action?this.mainObj.order.serviceType:this.serviceType[0],[b.t.required]),status:new b.d({value:"update"==this.mainObj.action?this.mainObj.order.status:this.statuses[0].value,disabled:"update"!=this.mainObj.action},[b.t.required]),itemDescription:new b.d("update"==this.mainObj.action?this.mainObj.order.itemDescription:"",[]),comment:new b.d("update"==this.mainObj.action?this.mainObj.order.comment:"",[]),driverId:new b.d({disabled:!0,value:"update"==this.mainObj.action&&this.mainObj.order.driver?this.mainObj.order.driver.id:""},[]),branchId:new b.d("update"==this.mainObj.action&&this.mainObj.order.branch?this.mainObj.order.branch.id:"",[]),customerId:new b.d("update"==this.mainObj.action&&this.mainObj.order.client?this.mainObj.order.client.id:"",[]),isPaid:new b.d({value:"update"==this.mainObj.action&&this.mainObj.order.isPaid,disabled:"update"==this.mainObj.action&&"finished"!=this.mainObj.order.status&&"canceled"!=this.mainObj.order.status&&"returned"!=this.mainObj.order.status||"admin"!=this.userRole&&"accountant"!=this.userRole},[b.t.required])}),this.isLoading=!0,e.t0="client"!=this.userRole,!e.t0){e.next=13;break}return e.next=9,this.branchesService.getBranches().subscribe((function(e){c.branches=e.data,c.isLoading=!1}),(function(e){return c.isLoading=!1}));case 9:return e.next=11,this.driverService.getDrivers().subscribe((function(e){c.drivers=e.data,c.isLoading=!1}),(function(e){return c.isLoading=!1}));case 11:return e.next=13,this.usersService.getUsers().subscribe((function(e){c.users=e.data.users,c.users=c.users.filter((function(e){return e.roles&&e.roles[0]&&"client"==e.roles[0].name})),c.isLoading=!1}),(function(e){return c.isLoading=!1}));case 13:for(t=0;t<this.statuses.length;t++)r=this.statuses[t],"manager"!=this.userRole&&"assigned"==r.value&&(this.statuses[t].disabled=!0),"pending"!=r.value&&"agent"!=this.userRole&&"accountant"!=this.userRole||(this.statuses[t].disabled=!0),this.mainObj&&this.mainObj.order&&("finished"==this.mainObj.order.status||"returned"==this.mainObj.order.status||"canceled"==this.mainObj.order.status||"pending"==this.mainObj.order.status&&"spotOrder"!=r.value||"assigned"==this.mainObj.order.status&&"spotOrder"==r.value)&&(this.statuses[t].disabled=!0),this.mainObj&&this.mainObj.order&&"spotOrder"==this.mainObj.order.status&&("finished"==r.value||"returned"==r.value)&&(this.statuses[t].disabled=!0);"admin"!=this.userRole||"returned"!=this.mainObj.order.status&&"canceled"!=this.mainObj.order.status||(this.statuses=this.statuses.map((function(e){return e.disabled=!1,e}))),this.addressFilteredOptions=this.ordersForm.controls.receiverAddress.valueChanges.pipe(Object(B.a)(""),Object(T.a)((function(e){return c._filterAddresses(e)})));case 15:case"end":return e.stop()}}),e,this)})))}},{key:"_filterAddresses",value:function(e){var t="";return e&&(t=e.toLowerCase()),this.addressLocations.filter((function(e){return e.toLowerCase().includes(t)}))}},{key:"close",value:function(){this.dialogRef.close({})}},{key:"submitForm",value:function(){var e=this;if(this.ordersForm.valid){if(this.isSubmittingForm)return;this.isSubmittingForm=!0;var t=JSON.parse(JSON.stringify(this.ordersForm.value));if(""==t.branchId&&delete t.branchId,""==t.customerId){var r=this.authService.getUser();"client"==this.userRole?t.customerId=r.id:delete t.customerId}""==t.driverId&&delete t.driverId,t.status=t.status||this.ordersForm.controls.status.value,t.fees=t.fees||this.ordersForm.controls.fees.value,t.isPaid=t.isPaid||!1,"update"===this.mainObj.action?this.ordersService.updateOrder(t,this.mainObj.order.id).subscribe((function(t){e.close(),e.isSubmittingForm=!1}),(function(t){e.isSubmittingForm=!1})):this.ordersService.createOrder(t).subscribe((function(t){e.close(),e.isSubmittingForm=!1}),(function(t){e.isSubmittingForm=!1}))}else this.toastService.error("please fill the missing fields")}}]),e}()).\u0275fac=function(e){return new(e||se)(k.yc(M.a),k.yc(V.a),k.yc(Z.a),k.yc(X.a),k.yc(w.a),k.yc(b.c),k.yc(v.h),k.yc(v.a),k.yc(F.b))},se.\u0275cmp=k.sc({type:se,selectors:[["app-orders-modal"]],decls:73,vars:29,consts:[["mat-dialog-title",""],[1,"orders-form"],[1,"form",3,"formGroup","ngSubmit"],["appearance","outline",1,"mat",3,"floatLabel"],["matInput","","placeholder","Shipment code","required","","type","text","formControlName","shipmentCode"],["matInput","","placeholder","Receiver name","type","text","required","","formControlName","receiverName"],["matInput","","placeholder","Receiver phone","type","tel","required","","formControlName","receiverPhone"],["type","text","placeholder","pick one","matInput","","formControlName","receiverAddress",3,"matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Receiver landmark","required","","type","text","formControlName","receiverLandmark"],["matInput","","placeholder","Item description","type","textarea","formControlName","itemDescription"],["matInput","","placeholder","Comment","type","textarea","formControlName","comment"],["matInput","","type","number","required","","formControlName","fees",3,"placeholder"],["required","","formControlName","currency"],["formControlName","driverId"],["required","","formControlName","serviceType"],["class","mat","appearance","outline",3,"floatLabel",4,"ngIf"],["matInput","","type","text","required","","formControlName","weight",3,"placeholder"],["required","","formControlName","status"],[3,"disabled","value",4,"ngFor","ngForOf"],["formControlName","isPaid",1,"mat"],["align","end"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","","cdkFocusInitial","",3,"click"],[3,"value"],["formControlName","branchId"],["formControlName","customerId"],[3,"disabled","value"]],template:function(e,t){if(1&e&&(k.Ec(0,"h2",0),k.md(1),k.Dc(),k.Ec(2,"mat-dialog-content",1),k.Ec(3,"form",2),k.Mc("ngSubmit",(function(){return t.submitForm()})),k.Ec(4,"mat-form-field",3),k.Ec(5,"mat-label"),k.md(6,"Shipment Code:"),k.Dc(),k.zc(7,"input",4),k.Dc(),k.Ec(8,"mat-form-field",3),k.Ec(9,"mat-label"),k.md(10,"Receiver Name:"),k.Dc(),k.zc(11,"input",5),k.Dc(),k.Ec(12,"mat-form-field",3),k.Ec(13,"mat-label"),k.md(14,"Receiver Phone:"),k.Dc(),k.zc(15,"input",6),k.Dc(),k.Ec(16,"mat-form-field",3),k.Ec(17,"mat-label"),k.md(18,"Receiver Address"),k.Dc(),k.zc(19,"input",7),k.Ec(20,"mat-autocomplete",null,8),k.ld(22,Y,2,2,"mat-option",9),k.Rc(23,"async"),k.Dc(),k.Dc(),k.Ec(24,"mat-form-field",3),k.Ec(25,"mat-label"),k.md(26,"Receiver Landmark:"),k.Dc(),k.zc(27,"input",10),k.Dc(),k.Ec(28,"mat-form-field",3),k.Ec(29,"mat-label"),k.md(30,"Item description:"),k.Dc(),k.zc(31,"input",11),k.Dc(),k.Ec(32,"mat-form-field",3),k.Ec(33,"mat-label"),k.md(34,"Comment:"),k.Dc(),k.zc(35,"input",12),k.Dc(),k.Ec(36,"mat-form-field",3),k.Ec(37,"mat-label"),k.md(38,"Cash Collection:"),k.Dc(),k.zc(39,"input",13),k.Dc(),k.Ec(40,"mat-form-field",3),k.Ec(41,"mat-label"),k.md(42,"Currency"),k.Dc(),k.Ec(43,"mat-select",14),k.ld(44,ee,2,2,"mat-option",9),k.Dc(),k.Dc(),k.Ec(45,"mat-form-field",3),k.Ec(46,"mat-label"),k.md(47,"Driver(Only manager can assign a driver)"),k.Dc(),k.Ec(48,"mat-select",15),k.ld(49,te,2,2,"mat-option",9),k.Dc(),k.Dc(),k.Ec(50,"mat-form-field",3),k.Ec(51,"mat-label"),k.md(52,"Service type"),k.Dc(),k.Ec(53,"mat-select",16),k.ld(54,re,2,2,"mat-option",9),k.Dc(),k.Dc(),k.ld(55,ie,5,2,"mat-form-field",17),k.ld(56,ne,5,2,"mat-form-field",17),k.Ec(57,"mat-form-field",3),k.Ec(58,"mat-label"),k.md(59,"Weight in Kg"),k.Dc(),k.zc(60,"input",18),k.Dc(),k.Ec(61,"mat-form-field",3),k.Ec(62,"mat-label"),k.md(63,"Status"),k.Dc(),k.Ec(64,"mat-select",19),k.ld(65,oe,2,3,"mat-option",20),k.Dc(),k.Dc(),k.Ec(66,"mat-checkbox",21),k.md(67," Close "),k.Dc(),k.Dc(),k.Dc(),k.Ec(68,"mat-dialog-actions",22),k.Ec(69,"button",23),k.Mc("click",(function(){return t.close()})),k.md(70,"Cancel"),k.Dc(),k.Ec(71,"button",24),k.Mc("click",(function(){return t.submitForm()})),k.md(72),k.Dc(),k.Dc()),2&e){var r=k.cd(21);k.lc(1),k.od("",t.mainObj.action," order"),k.lc(2),k.Wc("formGroup",t.ordersForm),k.lc(1),k.Wc("floatLabel","auto")("floatLabel","auto"),k.lc(4),k.Wc("floatLabel","auto"),k.lc(4),k.Wc("floatLabel","auto"),k.lc(4),k.Wc("floatLabel","auto"),k.lc(3),k.Wc("matAutocomplete",r),k.lc(3),k.Wc("ngForOf",k.Sc(23,27,t.addressFilteredOptions)),k.lc(2),k.Wc("floatLabel","auto"),k.lc(4),k.Wc("floatLabel","auto"),k.lc(4),k.Wc("floatLabel","auto"),k.lc(4),k.Wc("floatLabel","auto"),k.lc(3),k.Wc("placeholder","Fees"+("admin"!=t.userRole&&"update"===t.mainObj.action?"(Only admin can update the fees)":"")),k.lc(1),k.Wc("floatLabel","auto"),k.lc(4),k.Wc("ngForOf",t.currency),k.lc(1),k.Wc("floatLabel","auto"),k.lc(4),k.Wc("ngForOf",t.drivers),k.lc(1),k.Wc("floatLabel","auto"),k.lc(4),k.Wc("ngForOf",t.serviceType),k.lc(1),k.Wc("ngIf","client"!==t.userRole),k.lc(1),k.Wc("ngIf","client"!==t.userRole),k.lc(1),k.Wc("floatLabel","auto"),k.lc(3),k.Wc("placeholder","Weight in Kg"),k.lc(1),k.Wc("floatLabel","auto"),k.lc(4),k.Wc("ngForOf",t.statuses),k.lc(7),k.nd(t.mainObj.action)}},directives:[v.i,v.f,b.u,b.n,b.h,f.b,f.f,p.b,b.b,b.s,b.m,b.f,y.c,y.a,c.k,b.q,g.a,c.l,u.a,v.c,i.a,v.d,N.l],pipes:[c.b],styles:[".form[_ngcontent-%COMP%]{width:100%}.form__input[_ngcontent-%COMP%]{width:100%;margin-top:6px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.form-actions__login[_ngcontent-%COMP%]{margin-right:10px}.form-actions__forget[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:#536dfe}.mat[_ngcontent-%COMP%]{margin:10px}.mat4[_ngcontent-%COMP%]{background-color:tomato;margin-left:60px}.orders-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:5px 10px}"]}),se);function de(e,t){if(1&e&&(k.Ec(0,"mat-option",10),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.Wc("value",r),k.lc(1),k.od(" ",r," ")}}var ue,me=((ue=function(){function e(t,r,c){_classCallCheck(this,e),this.ordersService=t,this.dialogRef=r,this.toastService=c,this.serviceTypes=[],this.myControl=new b.d}return _createClass(e,[{key:"ngOnInit",value:function(){this.initPage()}},{key:"initPage",value:function(){return Object(S.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.serviceTypes=this.ordersService.serviceTypes,this.filteredOptions=this.myControl.valueChanges.pipe(Object(B.a)(""),Object(T.a)((function(e){return t._filter(e)})));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"_filter",value:function(e){var t="";return e&&(t=e.toLowerCase()),this.serviceTypes.filter((function(e){return e.toLowerCase().includes(t)}))}},{key:"getDisplayName",value:function(e){if(e)return e}},{key:"close",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.myControl.value?this.dialogRef.close({selectedService:e?this.myControl.value:null}):this.toastService.warning("Please select one of the available services.")}}]),e}()).\u0275fac=function(e){return new(e||ue)(k.yc(Z.a),k.yc(v.h),k.yc(F.b))},ue.\u0275cmp=k.sc({type:ue,selectors:[["app-service-type-select-modal"]],decls:15,vars:7,consts:[[1,"mat-typography"],[1,"example-form"],[1,"example-full-width"],["type","text","placeholder","pick one","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close","click"],[3,"value"]],template:function(e,t){if(1&e&&(k.Ec(0,"mat-dialog-content",0),k.Ec(1,"form",1),k.Ec(2,"mat-form-field",2),k.Ec(3,"mat-label"),k.md(4,"Select a service"),k.Dc(),k.zc(5,"input",3),k.Ec(6,"mat-autocomplete",4,5),k.ld(8,de,2,2,"mat-option",6),k.Rc(9,"async"),k.Dc(),k.Dc(),k.Dc(),k.Dc(),k.Ec(10,"mat-dialog-actions",7),k.Ec(11,"button",8),k.Mc("click",(function(){return t.close(!1)})),k.md(12,"Cancel"),k.Dc(),k.Ec(13,"button",9),k.Mc("click",(function(){return t.close(!0)})),k.md(14,"Select"),k.Dc(),k.Dc()),2&e){var r=k.cd(7);k.lc(5),k.Wc("formControl",t.myControl)("matAutocomplete",r),k.lc(1),k.Wc("displayWith",t.getDisplayName),k.lc(2),k.Wc("ngForOf",k.Sc(9,5,t.filteredOptions)),k.lc(5),k.Wc("mat-dialog-close",!1)}},directives:[v.f,b.u,b.n,b.o,f.b,f.f,p.b,b.b,y.c,b.m,b.e,y.a,c.k,v.c,i.a,v.d,N.l],pipes:[c.b],styles:[".example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),ue),pe=["orderPrint"];function fe(e,t){1&e&&k.zc(0,"mat-progress-bar",18)}function he(e,t){1&e&&(k.Ec(0,"p",19),k.md(1,"Orders List"),k.Dc())}function ve(e,t){if(1&e){var r=k.Fc();k.Ec(0,"div",20),k.Ec(1,"div",21),k.Ec(2,"mat-icon",13),k.md(3,"search"),k.Dc(),k.Dc(),k.Ec(4,"input",22),k.Mc("keyup",(function(e){return k.ed(r),k.Qc().applyFilter(e)})),k.Dc(),k.Ec(5,"button",12),k.Mc("click",(function(){return k.ed(r),k.Qc().showFilterInput()})),k.Ec(6,"mat-icon",13),k.md(7,"close"),k.Dc(),k.Dc(),k.Dc()}}function ge(e,t){if(1&e){var r=k.Fc();k.Ec(0,"button",23),k.Mc("click",(function(){return k.ed(r),k.Qc().deleteSelected()})),k.md(1,"Delete"),k.Dc()}}function be(e,t){if(1&e){var r=k.Fc();k.Ec(0,"button",24),k.Mc("click",(function(){return k.ed(r),k.Qc().transferSelected()})),k.md(1,"Transfer to branch"),k.Dc()}}function ye(e,t){if(1&e){var r=k.Fc();k.Ec(0,"button",25),k.Mc("click",(function(){k.ed(r);var e=t.$implicit;return k.Qc().onFilterSelect(e)})),k.md(1),k.Dc()}if(2&e){var c=t.$implicit;k.lc(1),k.od(" ",c.name," ")}}function De(e,t){if(1&e){var r=k.Fc();k.Ec(0,"button",25),k.Mc("click",(function(){k.ed(r);var e=t.$implicit;return k.Qc().onActionSelect(e)})),k.md(1),k.Dc()}if(2&e){var c=t.$implicit;k.lc(1),k.od(" ",c.name," ")}}function Ce(e,t){if(1&e){var r=k.Fc();k.Ec(0,"button",23),k.Mc("click",(function(){return k.ed(r),k.Qc().clearFilter()})),k.md(1),k.Dc()}if(2&e){var c=k.Qc();k.lc(1),k.od("Clear ",c.currentFilter.key," filter")}}function Ee(e,t){if(1&e){var r=k.Fc();k.Ec(0,"th",55),k.Ec(1,"mat-checkbox",56),k.Mc("change",(function(e){k.ed(r);var t=k.Qc(2);return e?t.masterToggle():null})),k.Dc(),k.Dc()}if(2&e){var c=k.Qc(2);k.lc(1),k.Wc("checked",c.selection.hasValue()&&c.isAllSelected())("indeterminate",c.selection.hasValue()&&!c.isAllSelected())("aria-label",c.checkboxLabel())}}function Oe(e,t){if(1&e){var r=k.Fc();k.Ec(0,"td",57),k.Ec(1,"mat-checkbox",58),k.Mc("click",(function(e){return k.ed(r),e.stopPropagation()}))("change",(function(e){k.ed(r);var c=t.$implicit,i=k.Qc(2);return e?i.selection.toggle(c):null})),k.Dc(),k.Dc()}if(2&e){var c=t.$implicit,i=k.Qc(2);k.lc(1),k.Wc("checked",i.selection.isSelected(c))("aria-label",i.checkboxLabel(c))}}function ke(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Code "),k.Dc())}function we(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.od(" ",r.id," ")}}function _e(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Shipment Code "),k.Dc())}function xe(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.od(" ",r.shipmentCode," ")}}function Se(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Receiver Name "),k.Dc())}function Pe(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.od(" ",r.receiverName," ")}}function Me(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Receiver Phone "),k.Dc())}function Fe(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.od(" ",r.receiverPhone," ")}}function We(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Receiver Address "),k.Dc())}function Ie(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.od(" ",r.receiverAddress," ")}}function je(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Receiver Landmark "),k.Dc())}function Re(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.od(" ",r.receiverLandmark," ")}}function Le(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Cash Collection "),k.Dc())}function Be(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.od(" ",r.fees+" "+(r.currency||"")," ")}}function Te(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Status "),k.Dc())}function Ae(e,t){if(1&e&&(k.Ec(0,"td",60),k.Ec(1,"div",61),k.Ec(2,"span"),k.md(3),k.Dc(),k.Dc(),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.Wc("ngClass",r.status),k.lc(2),k.nd(r.status)}}function Ne(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Comment "),k.Dc())}function ze(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.od(" ",r.comment," ")}}function $e(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Weight "),k.Dc())}function Qe(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.od(" ",r.weight," ")}}function qe(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Service Type "),k.Dc())}function Ue(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.od(" ",r.serviceType," ")}}function Je(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Item Description "),k.Dc())}function He(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.od(" ",r.itemDescription," ")}}function Ge(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Company Name "),k.Dc())}function Ke(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.od(" ",(null==r.client?null:r.client.companyName)+" ("+(null==r.client?null:r.client.phone)+")"," ")}}function Ve(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Driver Name "),k.Dc())}function Ze(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.od(" ",((null==r.driver?null:r.driver.name)||"")+" ("+((null==r.driver?null:r.driver.phone)||"")+")"," ")}}function Xe(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Branch "),k.Dc())}function Ye(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Dc()),2&e){var r=t.$implicit,c=k.Qc(2);k.lc(1),k.od(" ",c.transfered?null==r.lastTransferBranch?null:r.lastTransferBranch.name:null==r.branch?null:r.branch.name," ")}}function et(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Closed "),k.Dc())}function tt(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.od(" ",r.isPaid?"Yes":"No"," ")}}function rt(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Created At "),k.Dc())}function ct(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Rc(2,"date"),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.od(" ",k.Tc(2,1,r.created_at,"M/d/yy, h:mm a")," ")}}function it(e,t){1&e&&(k.Ec(0,"th",59),k.md(1," Created By "),k.Dc())}function at(e,t){if(1&e&&(k.Ec(0,"td",60),k.md(1),k.Dc()),2&e){var r=t.$implicit;k.lc(1),k.od(" ",r.createdBy," ")}}function nt(e,t){1&e&&k.zc(0,"th",59)}function ot(e,t){if(1&e){var r=k.Fc();k.Ec(0,"td",60),k.Ec(1,"button",62),k.Mc("click",(function(e){k.ed(r);var c=t.$implicit;return k.Qc(2).updateOrder(c,e)})),k.md(2,"Update"),k.Dc(),k.Dc()}if(2&e){var c=k.Qc(2);k.lc(1),k.Wc("disabled","admin"!=c.userRole&&"finished"==c.status)}}function st(e,t){1&e&&k.zc(0,"th",59)}function lt(e,t){if(1&e){var r=k.Fc();k.Ec(0,"td",60),k.Ec(1,"button",63),k.Mc("click",(function(e){k.ed(r);var c=t.$implicit;return k.Qc(2).delayOrder(c,e)})),k.md(2),k.Dc(),k.Dc()}if(2&e){var c=t.$implicit;k.lc(2),k.od(" ",c.isDelayed?"Mark as non delayed":"Delay","")}}function dt(e,t){1&e&&k.zc(0,"th",59)}function ut(e,t){if(1&e){var r=k.Fc();k.Ec(0,"td",60),k.Ec(1,"button",63),k.Mc("click",(function(e){k.ed(r);var c=t.$implicit;return k.Qc(2).confirmOrder(c,e)})),k.md(2," Confirm order"),k.Dc(),k.Dc()}}function mt(e,t){1&e&&k.zc(0,"tr",64)}function pt(e,t){if(1&e){var r=k.Fc();k.Ec(0,"tr",65),k.Mc("click",(function(){k.ed(r);var e=t.$implicit;return k.Qc(2).selection.toggle(e)})),k.Dc()}}function ft(e,t){if(1&e&&(k.Ec(0,"table",26),k.Cc(1,27),k.ld(2,Ee,2,3,"th",28),k.ld(3,Oe,2,2,"td",29),k.Bc(),k.Cc(4,30),k.ld(5,ke,2,0,"th",31),k.ld(6,we,2,1,"td",32),k.Bc(),k.Cc(7,33),k.ld(8,_e,2,0,"th",31),k.ld(9,xe,2,1,"td",32),k.Bc(),k.Cc(10,34),k.ld(11,Se,2,0,"th",31),k.ld(12,Pe,2,1,"td",32),k.Bc(),k.Cc(13,35),k.ld(14,Me,2,0,"th",31),k.ld(15,Fe,2,1,"td",32),k.Bc(),k.Cc(16,36),k.ld(17,We,2,0,"th",31),k.ld(18,Ie,2,1,"td",32),k.Bc(),k.Cc(19,37),k.ld(20,je,2,0,"th",31),k.ld(21,Re,2,1,"td",32),k.Bc(),k.Cc(22,38),k.ld(23,Le,2,0,"th",31),k.ld(24,Be,2,1,"td",32),k.Bc(),k.Cc(25,39),k.ld(26,Te,2,0,"th",31),k.ld(27,Ae,4,2,"td",32),k.Bc(),k.Cc(28,40),k.ld(29,Ne,2,0,"th",31),k.ld(30,ze,2,1,"td",32),k.Bc(),k.Cc(31,41),k.ld(32,$e,2,0,"th",31),k.ld(33,Qe,2,1,"td",32),k.Bc(),k.Cc(34,42),k.ld(35,qe,2,0,"th",31),k.ld(36,Ue,2,1,"td",32),k.Bc(),k.Cc(37,43),k.ld(38,Je,2,0,"th",31),k.ld(39,He,2,1,"td",32),k.Bc(),k.Cc(40,44),k.ld(41,Ge,2,0,"th",31),k.ld(42,Ke,2,1,"td",32),k.Bc(),k.Cc(43,45),k.ld(44,Ve,2,0,"th",31),k.ld(45,Ze,2,1,"td",32),k.Bc(),k.Cc(46,46),k.ld(47,Xe,2,0,"th",31),k.ld(48,Ye,2,1,"td",32),k.Bc(),k.Cc(49,47),k.ld(50,et,2,0,"th",31),k.ld(51,tt,2,1,"td",32),k.Bc(),k.Cc(52,48),k.ld(53,rt,2,0,"th",31),k.ld(54,ct,3,4,"td",32),k.Bc(),k.Cc(55,49),k.ld(56,it,2,0,"th",31),k.ld(57,at,2,1,"td",32),k.Bc(),k.Cc(58,50),k.ld(59,nt,1,0,"th",31),k.ld(60,ot,3,1,"td",32),k.Bc(),k.Cc(61,51),k.ld(62,st,1,0,"th",31),k.ld(63,lt,3,1,"td",32),k.Bc(),k.Cc(64,52),k.ld(65,dt,1,0,"th",31),k.ld(66,ut,3,0,"td",32),k.Bc(),k.ld(67,mt,1,0,"tr",53),k.ld(68,pt,1,0,"tr",54),k.Dc()),2&e){var r=k.Qc();k.Wc("dataSource",r.dataSource),k.lc(67),k.Wc("matHeaderRowDef",r.displayedColumns)("matHeaderRowDefSticky",!0),k.lc(1),k.Wc("matRowDefColumns",r.displayedColumns)}}function ht(e,t){if(1&e){var r=k.Fc();k.Ec(0,"div",66),k.Ec(1,"mat-paginator",67),k.Mc("page",(function(e){return k.ed(r),k.Qc().pageChanged(e)})),k.Dc(),k.Dc()}if(2&e){var c=k.Qc();k.lc(1),k.Wc("hidePageSize",!0)("pageSize",c.paginationObj.per_page)("length",c.paginationObj.total)}}function vt(e,t){if(1&e&&(k.Ec(0,"div"),k.Ec(1,"div",70),k.zc(2,"img",71),k.Ec(3,"p",72),k.md(4," Id: "),k.zc(5,"br"),k.md(6),k.Dc(),k.Ec(7,"p",72),k.md(8," SHIPMENT CODE: "),k.zc(9,"br"),k.md(10),k.Dc(),k.Dc(),k.Ec(11,"div",73),k.Ec(12,"div",74),k.Ec(13,"div",75),k.Ec(14,"h3"),k.md(15,"From"),k.Dc(),k.zc(16,"hr"),k.Dc(),k.Ec(17,"div"),k.Ec(18,"p"),k.Ec(19,"span",76),k.md(20," Company:"),k.Dc(),k.md(21),k.Dc(),k.Ec(22,"p"),k.Ec(23,"span",76),k.md(24,"Sevice Type:"),k.Dc(),k.md(25),k.Dc(),k.Dc(),k.Dc(),k.Ec(26,"div",74),k.Ec(27,"div",75),k.Ec(28,"h3"),k.md(29,"To"),k.Dc(),k.zc(30,"hr"),k.Dc(),k.Ec(31,"div"),k.Ec(32,"p"),k.Ec(33,"span",76),k.md(34,"Id:"),k.Dc(),k.md(35),k.Dc(),k.Ec(36,"p"),k.Ec(37,"span",76),k.md(38,"Receiver Name:"),k.Dc(),k.md(39),k.Dc(),k.Ec(40,"p"),k.Ec(41,"span",76),k.md(42,"Receiver Phone:"),k.Dc(),k.md(43),k.Dc(),k.Ec(44,"p"),k.Ec(45,"span",76),k.md(46,"Receiver Address:"),k.Dc(),k.md(47),k.Dc(),k.Ec(48,"p"),k.Ec(49,"span",76),k.md(50,"Receiver Landmark:"),k.Dc(),k.md(51),k.Dc(),k.Ec(52,"p"),k.Ec(53,"span",76),k.md(54,"Cash Collection:"),k.Dc(),k.md(55),k.Dc(),k.Ec(56,"p"),k.Ec(57,"span",76),k.md(58,"Currency:"),k.Dc(),k.md(59),k.Dc(),k.Ec(60,"p"),k.Ec(61,"span",76),k.md(62,"Item Description:"),k.Dc(),k.md(63),k.Dc(),k.Ec(64,"p"),k.Ec(65,"span",76),k.md(66,"Comment:"),k.Dc(),k.md(67),k.Dc(),k.Ec(68,"p"),k.Ec(69,"span",76),k.md(70,"Creation Date:"),k.Dc(),k.md(71),k.Rc(72,"date"),k.Dc(),k.Ec(73,"p"),k.Ec(74,"span",76),k.md(75,"Creation By:"),k.Dc(),k.md(76),k.Dc(),k.Dc(),k.Dc(),k.Dc(),k.zc(77,"hr"),k.Dc()),2&e){var r=t.$implicit;k.lc(6),k.od(" ",r.id," "),k.lc(4),k.od(" ",r.shipmentCode," "),k.lc(11),k.od(" ",null==r.client?null:r.client.companyName,""),k.lc(4),k.od(" ",r.serviceType,""),k.lc(10),k.od(" ",r.id,""),k.lc(4),k.od(" ",r.receiverName,""),k.lc(4),k.od(" ",r.receiverPhone,""),k.lc(4),k.od(" ",r.receiverAddress,""),k.lc(4),k.od(" ",r.receiverLandmark,""),k.lc(4),k.od(" ",r.fees,""),k.lc(4),k.od(" ",r.currency,""),k.lc(4),k.od(" ",r.itemDescription,""),k.lc(4),k.od(" ",r.comment,""),k.lc(4),k.od(" ",k.Tc(72,15,r.created_at,"M/d/yy,h:mm a"),""),k.lc(5),k.od(" ",r.createdBy,"")}}function gt(e,t){if(1&e&&(k.Ec(0,"div",68),k.ld(1,vt,78,18,"div",69),k.Dc()),2&e){var r=k.Qc();k.lc(1),k.Wc("ngForOf",r.ordersToPrint)}}var bt,yt,Dt,Ct,Et,Ot,kt,wt,_t,xt=((bt=function(){function e(t,r,c,i,a){_classCallCheck(this,e),this.dialog=t,this.cd=r,this.authService=c,this.ordersService=i,this.toastService=a,this.displayedColumns=["select","id","shipmentCode","receiverName","receiverPhone","receiverAddress","receiverLandmark","fees","status","comment","serviceType","itemDescription","weight","companyName","driverName","branch","isPaid","createdAt","createdBy","update","delay","confirm"],this.selection=new P.c(!0,[]),this.isLoading=!1,this.currentPage=1,this.userRole="",this.ordersToPrint=[],this.isShowFilterInput=!1,this.ordersTableData=[],this.moreActionsText="More actions",this.moreActions=[{key:"assignToDriver",name:"Assign to driver"},{key:"printOrders",name:"Print orders"},{key:"cancelOrders",name:"Cancel orders"}],this.filterByText="Filter by",this.filterByOptions=[{key:"driver",name:"Driver",value:null},{key:"company",name:"Company",value:null},{key:"serviceType",name:"Service Type",value:null},{key:"branch",name:"Branch",value:null}],this.currentFilter=null}return _createClass(e,[{key:"ngOnInit",value:function(){this.initPage()}},{key:"initPage",value:function(){this.userRole=this.authService.currentUserRole(),this.getOrders("")}},{key:"getOrders",value:function(e){var t=this;this.isLoading=!0,this.ordersService.getOrders(this.status,this.transfered,e,this.currentPage,this.currentFilter).subscribe((function(e){t.ordersTableData=e.data.orders,t.paginationObj=e.data.pagination,t.dataSource=new d.k(t.ordersTableData),t.dataSource.paginator=t.paginator,t.isLoading=!1,t.hideClientActions(),t.selection.clear()}),(function(e){t.isLoading=!1,t.selection.clear()}))}},{key:"hideClientActions",value:function(){"spotOrder"!=this.status&&(this.moreActions=this.moreActions.filter((function(e){return"assignToDriver"!=e.key})),this.displayedColumns=this.displayedColumns.filter((function(e){return"delay"!=e}))),this.transfered||(this.displayedColumns=this.displayedColumns.filter((function(e){return"confirm"!=e}))),"client"==this.userRole&&(this.displayedColumns=this.displayedColumns.filter((function(e){return"update"!=e&&"confirm"!=e})),this.moreActions=this.moreActions.filter((function(e){return"assignToDriver"!=e.key&&"cancelOrders"!=e.key})),this.filterByOptions=this.filterByOptions.filter((function(e){return"driver"!=e.key&&"company"!=e.key}))),"admin"!=this.userRole&&"manager"!=this.userRole&&(this.moreActions=this.moreActions.filter((function(e){return"cancelOrders"!=e.key}))),"canceled"!=this.status&&"finished"!=this.status||(this.moreActions=this.moreActions.filter((function(e){return"cancelOrders"!=e.key})))}},{key:"isAllSelected",value:function(){return this.selection.selected.length===this.dataSource.data.length}},{key:"masterToggle",value:function(){var e=this;this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach((function(t){return e.selection.select(t)}))}},{key:"checkboxLabel",value:function(e){return e?"".concat(this.selection.isSelected(e)?"deselect":"select"," row ").concat(e.position+1):(this.isAllSelected()?"select":"deselect")+" all"}},{key:"applyFilter",value:function(e){var t=e.target.value;this.currentPage=1,this.getOrders(t)}},{key:"showFilterInput",value:function(){this.isShowFilterInput=!this.isShowFilterInput,this.dataSource=new d.k(this.ordersTableData),this.isShowFilterInput||(this.currentPage=1,this.getOrders(""))}},{key:"assignToDriver",value:function(){var e=this,t=this.selection.selected||[],r=t.map((function(e){return e.id}));0!=t.length?this.openDriversModal().then((function(t){t&&e.ordersService.assignToDriver({ordersIds:r},t.id).subscribe((function(t){"success"===t.status?(e.toastService.success(t.message),e.getOrders("")):e.toastService.error("Error occured while transfering orders","",{positionClass:"toast-top-center"})}),(function(t){e.toastService.error("Error occured while transfering orders","",{positionClass:"toast-top-center"})}))})):this.toastService.warning("Please select at least one order!")}},{key:"cancelOrders",value:function(){var e=this,t=this.selection.selected||[],r=t.map((function(e){return e.id}));0!=t.length?confirm("Are you sure you want to cancel the selected orders?")&&this.ordersService.changeStatus({ordersIds:r,status:"canceled"}).subscribe((function(t){"success"===t.status?(e.toastService.success(t.message),e.getOrders("")):e.toastService.error("Error occured while canceling orders","",{positionClass:"toast-top-center"})}),(function(t){e.toastService.error("Error occured while canceling orders","",{positionClass:"toast-top-center"})})):this.toastService.warning("Please select at least one order!")}},{key:"printOrder",value:function(){var e=this.selection.selected||[];if(0!=e.length){this.ordersToPrint=e,this.cd.detectChanges();var t=document.getElementById("orderPrint"),r=window.open("/","Print-Window");r.document.write('<html><head><style>.float-container {display: flex;border: 3px solid #000;margin: 10px;padding: 20px;} .print-header{display: inline-block;width: 10%;vertical-align: top;padding: 40px;font-size: 20px;font-weight: 800;background: white;margin: 0px 20px;}.float-child {flex: 1;width: 50%;padding: 20px;border: 2px solid gray;}.float-child:first-child {margin-right: 20px;}.bold {font-weight: bold;}</style></head><body onload="window.print()">'+t.innerHTML+"</body></html>"),r.document.close(),setTimeout((function(){r.close()}),10)}else this.toastService.warning("Please select at least one order!")}},{key:"deleteSelected",value:function(){var e=this,t=this.selection.selected||[],r=t.map((function(e){return e.id}));0!=t.length?confirm("Are you sure you want to delete the selected order(s)")&&this.ordersService.deleteOrders({ordersIds:r}).subscribe((function(t){"success"===t.status?(e.toastService.success(t.message),e.getOrders("")):e.toastService.error("Error occured while deleting the selected orders","",{positionClass:"toast-top-center"})}),(function(t){e.toastService.error("Error occured while deleting the selected orders","",{positionClass:"toast-top-center"})})):this.toastService.warning("Please select at least one order!")}},{key:"transferSelected",value:function(){var e=this,t=this.selection.selected||[],r=t.map((function(e){return e.id}));0!=t.length?this.openBranchesModal().then((function(t){t&&e.ordersService.transferOrders({ordersIds:r},t.id).subscribe((function(t){"success"===t.status?(e.toastService.success(t.message),e.getOrders("")):e.toastService.error("Error occured while transfering orders","",{positionClass:"toast-top-center"})}),(function(t){e.toastService.error("Error occured while transfering orders","",{positionClass:"toast-top-center"})}))})):this.toastService.warning("Please select at least one order!","",{positionClass:"toast-top-center"})}},{key:"openBranchesModal",value:function(){return Object(S.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){t.dialog.open(L).afterClosed().subscribe((function(t){e(t&&t.selectedBranch?t.selectedBranch:null)}),(function(t){e(null)}))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"openDriversModal",value:function(){return Object(S.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){t.dialog.open(q).afterClosed().subscribe((function(t){e(t&&t.selectedDriver?t.selectedDriver:null)}),(function(t){e(null)}))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"openCompanyModal",value:function(){return Object(S.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){t.dialog.open(K).afterClosed().subscribe((function(t){e(t&&t.selectedCompany?t.selectedCompany:null)}),(function(t){e(null)}))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"openServiceTypeModal",value:function(){return Object(S.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){t.dialog.open(me).afterClosed().subscribe((function(t){e(t&&t.selectedService?t.selectedService:null)}),(function(t){e(null)}))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"pageChanged",value:function(e){this.currentPage=e.pageIndex+1,this.getOrders("")}},{key:"ngOnChanges",value:function(e){e.reload&&this.getOrders("")}},{key:"updateOrder",value:function(e,t){var r=this;t&&(t.preventDefault(),t.stopPropagation()),this.dialog.open(le,{data:{action:"update",order:e},height:"600px",width:"860px"}).afterClosed().subscribe((function(e){r.selection.clear(),r.getOrders("")}),(function(e){r.masterToggle(),r.masterToggle()}))}},{key:"delayOrder",value:function(e,t){if(t&&(t.preventDefault(),t.stopPropagation()),this.masterToggle(),this.masterToggle(),"admin"==this.userRole||"manager"==this.userRole){e.isDelayed=!e.isDelayed;var r=JSON.parse(JSON.stringify(e));r.barcode=r.barcode||"",r.comment=r.comment||"",r.customerId=r.client.id,r.branchId=r.branch?r.branch.id:null,r.driverId=r.driver?r.driver.id:null,this.ordersService.updateOrder(r,e.id).subscribe((function(e){}))}else this.toastService.warning("User is not allowed to make this action")}},{key:"confirmOrder",value:function(e,t){var r=this;t&&(t.preventDefault(),t.stopPropagation()),this.masterToggle(),this.masterToggle(),e.isTransferedConfirmed=!0,e.lastTransferBranchId=null;var c=JSON.parse(JSON.stringify(e));c.barcode||delete c.barcode,c.comment||delete c.comment,c.barcode||delete c.barcode,c.branch&&(c.branchId=c.branch.id),c.driver&&(c.driverId=c.driver.id),c.client&&(c.customerId=c.client.id),c.isDelayed=c.isDelayed||!1,c.status="spotOrder",this.ordersService.updateOrder(c,e.id).subscribe((function(e){r.getOrders("")}))}},{key:"onActionSelect",value:function(e){switch(e.key){case"assignToDriver":this.assignToDriver();break;case"printOrders":this.printOrder();break;case"cancelOrders":this.cancelOrders()}}},{key:"filterByDriver",value:function(e){var t=this;this.currentFilter=e,this.openDriversModal().then((function(e){e&&(t.currentFilter.value=e.id,t.getOrders(""))}))}},{key:"filterByBranch",value:function(e){var t=this;this.currentFilter=e,this.openBranchesModal().then((function(e){e&&(t.currentFilter.value=e.id,t.getOrders(""))}))}},{key:"filterByCompany",value:function(e){var t=this;this.currentFilter=e,this.openCompanyModal().then((function(e){e&&(t.currentFilter.value=e.id,t.getOrders(""))}))}},{key:"filterByServiceType",value:function(e){var t=this;this.currentFilter=e,this.openServiceTypeModal().then((function(e){e&&(t.currentFilter.value=e,t.getOrders(""))}))}},{key:"clearFilter",value:function(){this.currentFilter=null,this.getOrders("")}},{key:"onFilterSelect",value:function(e){switch(e.key){case"driver":this.filterByDriver(e);break;case"company":this.filterByCompany(e);break;case"serviceType":this.filterByServiceType(e);break;case"branch":this.filterByBranch(e)}}}]),e}()).\u0275fac=function(e){return new(e||bt)(k.yc(v.b),k.yc(k.j),k.yc(w.a),k.yc(Z.a),k.yc(F.b))},bt.\u0275cmp=k.sc({type:bt,selectors:[["app-orders-table"]],viewQuery:function(e,t){var r;1&e&&(k.jd(m.a,!0),k.jd(pe,!0)),2&e&&(k.bd(r=k.Nc())&&(t.paginator=r.first),k.bd(r=k.Nc())&&(t.MyDOMElement=r.first))},inputs:{status:"status",transfered:"transfered",reload:"reload"},features:[k.jc],decls:33,vars:15,consts:[[1,"orders-table-wrapper"],["mode","indeterminate",4,"ngIf"],[1,"orders-table-wrapper__header"],["class","orders-table-wrapper__title",4,"ngIf"],["class","orders-table-wrapper__search",4,"ngIf"],["mat-flat-button","","color","warn","class","orders-table-wrapper__all",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","class","orders-table-wrapper__all",3,"click",4,"ngIf"],[1,"orders-table-wrapper__all"],["color","accent","mat-raised-button","",3,"matMenuTriggerFor"],["menu1","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["menu2","matMenu"],["mat-mini-fab","",1,"orders-table-wrapper__button",3,"click"],[1,"orders-table-wrapper__icon"],[1,"orders-table__content",2,"height","60vh","overflow","auto"],["class","orders-table__table","mat-table","",3,"dataSource",4,"ngIf"],["class","pagination",4,"ngIf"],["id","orderPrint","class","printOnly",4,"ngIf"],["mode","indeterminate"],[1,"orders-table-wrapper__title"],[1,"orders-table-wrapper__search"],[1,"orders-table-wrapper__icon-wrapper"],["matInput","",1,"orders-table-wrapper__search-input",3,"keyup"],["mat-flat-button","","color","warn",1,"orders-table-wrapper__all",3,"click"],["mat-raised-button","","color","primary",1,"orders-table-wrapper__all",3,"click"],["mat-menu-item","",3,"click"],["mat-table","",1,"orders-table__table",3,"dataSource"],["matColumnDef","select"],["class","orders-table__table-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","orders-table__table-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["class","orders-table__table-header","mat-header-cell","",4,"matHeaderCellDef"],["class","orders-table__table-body","mat-cell","",4,"matCellDef"],["matColumnDef","shipmentCode"],["matColumnDef","receiverName"],["matColumnDef","receiverPhone"],["matColumnDef","receiverAddress"],["matColumnDef","receiverLandmark"],["matColumnDef","fees"],["matColumnDef","status"],["matColumnDef","comment"],["matColumnDef","weight"],["matColumnDef","serviceType"],["matColumnDef","itemDescription"],["matColumnDef","companyName"],["matColumnDef","driverName"],["matColumnDef","branch"],["matColumnDef","isPaid"],["matColumnDef","createdAt"],["matColumnDef","createdBy"],["matColumnDef","update"],["matColumnDef","delay"],["matColumnDef","confirm"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"orders-table__table-checkbox"],["color","primary",3,"checked","indeterminate","aria-label","change"],["mat-cell","",1,"orders-table__table-checkbox"],["color","primary",3,"checked","aria-label","click","change"],["mat-header-cell","",1,"orders-table__table-header"],["mat-cell","",1,"orders-table__table-body"],[1,"material-table__content-badge",3,"ngClass"],["mat-flat-button","","color","accent",1,"orders-table-wrapper__deleteBtn",3,"disabled","click"],["mat-flat-button","","color","accent",1,"orders-table-wrapper__deleteBtn",3,"click"],["mat-header-row",""],["mat-row","",3,"click"],[1,"pagination"],["showFirstLastButtons","",3,"hidePageSize","pageSize","length","page"],["id","orderPrint",1,"printOnly"],[4,"ngFor","ngForOf"],[2,"width","100%","text-align","center","background","black"],["src","assets/logo/logo-lg.jpeg",2,"width","50%","height","120px"],[2,"display","inline-block","padding","20px","margin-right","20px","vertical-align","top"],[1,"float-container",2,"page-break-after","always"],[1,"float-child"],[2,"text-align","center"],[1,"bold"]],template:function(e,t){if(1&e&&(k.Ec(0,"mat-card",0),k.ld(1,fe,1,0,"mat-progress-bar",1),k.Ec(2,"mat-card-title",2),k.ld(3,he,2,0,"p",3),k.ld(4,ve,8,0,"div",4),k.Ec(5,"div"),k.ld(6,ge,2,0,"button",5),k.ld(7,be,2,0,"button",6),k.Ec(8,"span",7),k.Ec(9,"button",8),k.md(10),k.Ec(11,"mat-icon"),k.md(12,"arrow_drop_down"),k.Dc(),k.Dc(),k.Ec(13,"mat-menu",null,9),k.ld(15,ye,2,1,"button",10),k.Dc(),k.Dc(),k.Ec(16,"span",7),k.Ec(17,"button",8),k.md(18),k.Ec(19,"mat-icon"),k.md(20,"arrow_drop_down"),k.Dc(),k.Dc(),k.Ec(21,"mat-menu",null,11),k.ld(23,De,2,1,"button",10),k.Dc(),k.Dc(),k.Ec(24,"span",7),k.ld(25,Ce,2,1,"button",5),k.Dc(),k.Ec(26,"button",12),k.Mc("click",(function(){return t.showFilterInput()})),k.Ec(27,"mat-icon",13),k.md(28,"search"),k.Dc(),k.Dc(),k.Dc(),k.Dc(),k.Ec(29,"mat-card-content",14),k.ld(30,ft,69,4,"table",15),k.ld(31,ht,2,3,"div",16),k.Dc(),k.Dc(),k.ld(32,gt,2,1,"div",17)),2&e){var r=k.cd(14),c=k.cd(22);k.lc(1),k.Wc("ngIf",t.isLoading),k.lc(2),k.Wc("ngIf",!t.isShowFilterInput),k.lc(1),k.Wc("ngIf",t.isShowFilterInput),k.lc(2),k.Wc("ngIf","admin"==t.userRole),k.lc(1),k.Wc("ngIf","manager"==t.userRole||"admin"==t.userRole),k.lc(2),k.Wc("matMenuTriggerFor",r),k.lc(1),k.od(" ",t.filterByText,""),k.lc(5),k.Wc("ngForOf",t.filterByOptions),k.lc(2),k.Wc("matMenuTriggerFor",c),k.lc(1),k.od(" ",t.moreActionsText,""),k.lc(5),k.Wc("ngForOf",t.moreActions),k.lc(2),k.Wc("ngIf",t.currentFilter),k.lc(5),k.Wc("ngIf",!t.isLoading),k.lc(1),k.Wc("ngIf",t.paginationObj),k.lc(1),k.Wc("ngIf",t.ordersToPrint.length>0)}},directives:[a.a,c.l,a.d,i.a,l.c,o.a,l.d,c.k,a.b,h.a,p.b,l.a,d.j,d.c,d.e,d.b,d.g,d.i,d.d,u.a,d.a,c.j,d.f,d.h,m.a],pipes:[c.e],styles:[".orders-table-wrapper[_ngcontent-%COMP%]{padding-left:0;padding-right:0;margin:16px 16px 32px;box-shadow:0 3px 11px 0 #e8eafc,0 3px 3px -2px hsla(0,0%,69.8%,.10196078431372549),0 1px 8px 0 hsla(0,0%,60.4%,.10196078431372549);max-width:100%;overflow-x:auto}.orders-table-wrapper__header[_ngcontent-%COMP%]{padding:0 24px;display:flex;align-items:center;justify-content:space-between}@media (max-width:576px){.orders-table-wrapper__header[_ngcontent-%COMP%]{padding:0 16px}}.orders-table-wrapper__title[_ngcontent-%COMP%]{margin:0}.orders-table-wrapper__search[_ngcontent-%COMP%]{display:flex;align-items:center}.orders-table-wrapper__icon-wrapper[_ngcontent-%COMP%]{height:46px;width:46px;display:flex;align-items:center;justify-content:center}.orders-table-wrapper__icon[_ngcontent-%COMP%]{color:inherit}.orders-table-wrapper__search-input[_ngcontent-%COMP%]{font-size:16px;height:32px;border:0;border-bottom:1px solid #6e6e6e;outline:none}@media (max-width:576px){.orders-table-wrapper__search-input[_ngcontent-%COMP%]{width:150px}}.orders-table-wrapper__search-input[_ngcontent-%COMP%]:focus{border-bottom:2px solid #536dfe}.orders-table-wrapper__button[_ngcontent-%COMP%]{box-shadow:none;background-color:inherit;width:46px;height:46px;color:#6e6e6e}.orders-table-wrapper__button[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.08);color:#536dfe}.orders-table-wrapper__transferBtn[_ngcontent-%COMP%]{margin-left:20px;margin-right:30px}.orders-table-wrapper__all[_ngcontent-%COMP%]{margin-right:10px}@media (max-width:576px){.orders-table__content[_ngcontent-%COMP%]{overflow-x:scroll}}.orders-table__table[_ngcontent-%COMP%]{width:100%;box-shadow:none}@media (max-width:576px){.orders-table__table[_ngcontent-%COMP%]{width:200%}}.orders-table__table-checkbox[_ngcontent-%COMP%]{width:32px;padding-left:24px}.orders-table__table-body[_ngcontent-%COMP%], .orders-table__table-header[_ngcontent-%COMP%]{padding:1rem;font-size:14px}.float-container[_ngcontent-%COMP%]{display:flex;border:3px solid #000;margin:10px;padding:20px}.float-child[_ngcontent-%COMP%]{flex:1;width:50%;padding:20px;border:2px solid grey}.float-child[_ngcontent-%COMP%]:first-child{margin-right:20px}.print-header[_ngcontent-%COMP%]{display:inline-block;width:10%;vertical-align:top;padding:40px;font-size:20px;font-weight:800;background:#fff;margin:0 20px}"]}),bt),St=r("jQpT"),Pt=((Ot=function(){function e(t,r,c,i){_classCallCheck(this,e),this.dialog=t,this.datepipe=r,this.apiService=i,this.status="finished",this.reload=!1,this.userRole="",this.events=[],this.selectedDate=new Date;var a=this.selectedDate.getDate()-7;this.selectedDate.setDate(a),this.userRole=c.currentUserRole()}return _createClass(e,[{key:"generateCsvPaidOrders",value:function(){this.apiService.getAdvanced("orders/generatePaidOrders?date="+this.datepipe.transform(this.selectedDate,"yyyy-MM-dd"),"text/csv").subscribe((function(e){var t=new Blob([e],{type:"text/csv"}),r=URL.createObjectURL(t),c=document.createElement("a");c.href=r,c.download="paidOrders.csv",c.click(),setTimeout((function(){URL.revokeObjectURL(r)}),100)}))}},{key:"addEvent",value:function(e,t){this.selectedDate=t.value}}]),e}()).\u0275fac=function(e){return new(e||Ot)(k.yc(v.b),k.yc(c.e),k.yc(w.a),k.yc(_.a))},Ot.\u0275cmp=k.sc({type:Ot,selectors:[["app-finished-orders-page"]],decls:17,vars:7,consts:[["role","heading",1,"page-header"],["appearance","fill",2,"margin-right","10px"],["matInput","",3,"matDatepicker","value","dateInput","dateChange"],["matSuffix","",3,"for"],["picker",""],["mat-raised-button","","color","primary",1,"orders-table-wrapper__transferBtn","inline-block",3,"disabled","click"],[1,"tables-wrapper"],[3,"status","reload","transfered"]],template:function(e,t){if(1&e&&(k.Ec(0,"app-layout"),k.Ec(1,"mat-toolbar",0),k.Ec(2,"h1"),k.md(3,"Finished orders"),k.Dc(),k.Ec(4,"div"),k.Ec(5,"mat-form-field",1),k.Ec(6,"mat-label"),k.md(7,"Orders After:"),k.Dc(),k.Ec(8,"input",2),k.Mc("dateInput",(function(e){return t.addEvent("input",e)}))("dateChange",(function(e){return t.addEvent("change",e)})),k.Dc(),k.zc(9,"mat-datepicker-toggle",3),k.zc(10,"mat-datepicker",null,4),k.Dc(),k.Ec(12,"button",5),k.Mc("click",(function(){return t.generateCsvPaidOrders()})),k.md(13,"Export paid orders"),k.Dc(),k.Dc(),k.Dc(),k.Ec(14,"div",6),k.zc(15,"app-orders-table",7),k.Dc(),k.zc(16,"app-footer"),k.Dc()),2&e){var r=k.cd(11);k.lc(8),k.Wc("matDatepicker",r)("value",t.selectedDate),k.lc(1),k.Wc("for",r),k.lc(3),k.Wc("disabled","admin"!=t.userRole&&"accountant"!=t.userRole),k.lc(3),k.Wc("status",t.status)("reload",t.reload)("transfered",!1)}},directives:[x.a,s.a,f.b,f.f,p.b,D.b,D.d,f.g,D.a,i.a,xt,St.a],styles:[""]}),Ot),Mt=((Et=function(){function e(t,r){_classCallCheck(this,e),this.dialog=t,this.apiService=r,this.status="pending",this.reload=!1}return _createClass(e,[{key:"createOrder",value:function(){var e=this;this.dialog.open(le,{data:{action:"create",order:{}},height:"600px",width:"860px"}).afterClosed().subscribe((function(t){e.reload=!e.reload}),(function(e){}))}}]),e}()).\u0275fac=function(e){return new(e||Et)(k.yc(v.b),k.yc(_.a))},Et.\u0275cmp=k.sc({type:Et,selectors:[["app-pending-orders-page"]],decls:10,vars:3,consts:[["role","heading",1,"page-header"],["mat-raised-button","","color","primary",1,"orders-table-wrapper__transferBtn",2,"margin-right","10px",3,"click"],[1,"tables-wrapper"],[3,"status","transfered","reload"]],template:function(e,t){1&e&&(k.Ec(0,"app-layout"),k.Ec(1,"mat-toolbar",0),k.Ec(2,"h1"),k.md(3,"Orders in progress"),k.Dc(),k.Ec(4,"div"),k.Ec(5,"button",1),k.Mc("click",(function(){return t.createOrder()})),k.md(6,"Create Order"),k.Dc(),k.Dc(),k.Dc(),k.Ec(7,"div",2),k.zc(8,"app-orders-table",3),k.Dc(),k.zc(9,"app-footer"),k.Dc()),2&e&&(k.lc(8),k.Wc("status",t.status)("transfered",!1)("reload",t.reload))},directives:[x.a,s.a,i.a,xt,St.a],styles:[""]}),Et),Ft=((Ct=function(){function e(t,r,c){_classCallCheck(this,e),this.dialog=t,this.datepipe=r,this.apiService=c,this.status="spotOrder",this.reload=!1,this.events=[],this.selectedDate=new Date;var i=this.selectedDate.getDate()-7;this.selectedDate.setDate(i)}return _createClass(e,[{key:"openDriversModal",value:function(){return Object(S.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){t.dialog.open(q).afterClosed().subscribe((function(t){e(t&&t.selectedDriver?t.selectedDriver:null)}),(function(t){e(null)}))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"generateCsvAssignedOrders",value:function(){var e=this;this.openDriversModal().then((function(t){var r="";t&&(r=t.id);var c="?";c+="date="+e.datepipe.transform(e.selectedDate,"yyyy-MM-dd"),r&&(c+="&driverId="+r),e.apiService.getAdvanced("orders/generateAssignedOrders"+c,"text/csv").subscribe((function(e){var t=new Blob([e],{type:"text/csv"}),r=URL.createObjectURL(t),c=document.createElement("a");c.href=r,c.download="assignedOrders.csv",c.click(),setTimeout((function(){URL.revokeObjectURL(r)}),100)}))}))}},{key:"addEvent",value:function(e,t){this.selectedDate=t.value}}]),e}()).\u0275fac=function(e){return new(e||Ct)(k.yc(v.b),k.yc(c.e),k.yc(_.a))},Ct.\u0275cmp=k.sc({type:Ct,selectors:[["app-spot-orders-page"]],decls:17,vars:6,consts:[["role","heading",1,"page-header"],["appearance","fill",2,"margin-right","10px"],["matInput","",3,"matDatepicker","value","dateInput","dateChange"],["matSuffix","",3,"for"],["picker",""],["mat-raised-button","","color","primary",1,"orders-table-wrapper__transferBtn","inline-block",3,"click"],[1,"tables-wrapper"],[3,"status","transfered","reload"]],template:function(e,t){if(1&e&&(k.Ec(0,"app-layout"),k.Ec(1,"mat-toolbar",0),k.Ec(2,"h1"),k.md(3,"Orders in progress"),k.Dc(),k.Ec(4,"div"),k.Ec(5,"mat-form-field",1),k.Ec(6,"mat-label"),k.md(7,"Orders After:"),k.Dc(),k.Ec(8,"input",2),k.Mc("dateInput",(function(e){return t.addEvent("input",e)}))("dateChange",(function(e){return t.addEvent("change",e)})),k.Dc(),k.zc(9,"mat-datepicker-toggle",3),k.zc(10,"mat-datepicker",null,4),k.Dc(),k.Ec(12,"button",5),k.Mc("click",(function(){return t.generateCsvAssignedOrders()})),k.md(13,"Export assigned orders"),k.Dc(),k.Dc(),k.Dc(),k.Ec(14,"div",6),k.zc(15,"app-orders-table",7),k.Dc(),k.zc(16,"app-footer"),k.Dc()),2&e){var r=k.cd(11);k.lc(8),k.Wc("matDatepicker",r)("value",t.selectedDate),k.lc(1),k.Wc("for",r),k.lc(6),k.Wc("status",t.status)("transfered",!1)("reload",t.reload)}},directives:[x.a,s.a,f.b,f.f,p.b,D.b,D.d,f.g,D.a,i.a,xt,St.a],styles:[""]}),Ct),Wt=((Dt=function e(t){_classCallCheck(this,e),this.dialog=t,this.status="returned",this.reload=!1}).\u0275fac=function(e){return new(e||Dt)(k.yc(v.b))},Dt.\u0275cmp=k.sc({type:Dt,selectors:[["app-returned-orders-page"]],decls:7,vars:3,consts:[["role","heading",1,"page-header"],[1,"tables-wrapper"],[3,"status","reload","transfered"]],template:function(e,t){1&e&&(k.Ec(0,"app-layout"),k.Ec(1,"mat-toolbar",0),k.Ec(2,"h1"),k.md(3,"Returned orders"),k.Dc(),k.Dc(),k.Ec(4,"div",1),k.zc(5,"app-orders-table",2),k.Dc(),k.zc(6,"app-footer"),k.Dc()),2&e&&(k.lc(5),k.Wc("status",t.status)("reload",t.reload)("transfered",!1))},directives:[x.a,s.a,xt,St.a],styles:[""]}),Dt),It=((yt=function e(t){_classCallCheck(this,e),this.dialog=t,this.status="canceled",this.reload=!1}).\u0275fac=function(e){return new(e||yt)(k.yc(v.b))},yt.\u0275cmp=k.sc({type:yt,selectors:[["app-canceled-orders-page"]],decls:7,vars:3,consts:[["role","heading",1,"page-header"],[1,"tables-wrapper"],[3,"status","transfered","reload"]],template:function(e,t){1&e&&(k.Ec(0,"app-layout"),k.Ec(1,"mat-toolbar",0),k.Ec(2,"h1"),k.md(3,"Canceled Orders"),k.Dc(),k.Dc(),k.Ec(4,"div",1),k.zc(5,"app-orders-table",2),k.Dc(),k.zc(6,"app-footer"),k.Dc()),2&e&&(k.lc(5),k.Wc("status",t.status)("transfered",!1)("reload",t.reload))},directives:[x.a,s.a,xt,St.a],styles:[""]}),yt),jt=[{path:"pending",component:Mt},{path:"spot",component:Ft},{path:"finished",component:Pt},{path:"returned",component:Wt},{path:"transfered",component:(kt=function e(){_classCallCheck(this,e),this.status=""},kt.\u0275fac=function(e){return new(e||kt)},kt.\u0275cmp=k.sc({type:kt,selectors:[["app-transfered-page"]],decls:7,vars:2,consts:[["role","heading",1,"page-header"],[1,"tables-wrapper"],[3,"status","transfered"]],template:function(e,t){1&e&&(k.Ec(0,"app-layout"),k.Ec(1,"mat-toolbar",0),k.Ec(2,"h1"),k.md(3,"Transfered Orders"),k.Dc(),k.Dc(),k.Ec(4,"div",1),k.zc(5,"app-orders-table",2),k.Dc(),k.zc(6,"app-footer"),k.Dc()),2&e&&(k.lc(5),k.Wc("status",t.status)("transfered",!0))},directives:[x.a,s.a,xt,St.a],styles:[""]}),kt)},{path:"canceled",component:It}],Rt=((wt=function e(){_classCallCheck(this,e)}).\u0275mod=k.wc({type:wt}),wt.\u0275inj=k.vc({factory:function(e){return new(e||wt)},imports:[[O.f.forChild(jt)],O.f]}),wt),Lt=r("PCNd"),Bt=((_t=function e(){_classCallCheck(this,e)}).\u0275mod=k.wc({type:_t}),_t.\u0275inj=k.vc({factory:function(e){return new(e||_t)},providers:[Z.a,c.e],imports:[[c.c,Rt,i.b,a.c,n.a,l.b,u.b,g.b,m.b,f.d,o.b,h.b,C.a,E.a,N.j,v.g,y.b,d.l,s.b,D.c,p.c,Lt.a,b.r,b.i]]}),_t)}}]);