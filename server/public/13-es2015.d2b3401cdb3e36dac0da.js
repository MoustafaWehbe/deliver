(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{Xlj8:function(e,t,c){"use strict";c.r(t),c.d(t,"OrdersModule",(function(){return Ct}));var i=c("ofXK"),r=c("bTqV"),a=c("Wp6s"),n=c("wZkO"),s=c("NFeN"),o=c("/t3+"),l=c("STbY"),d=c("+0xr"),m=c("bSwM"),u=c("M9IT"),p=c("qFsG"),h=c("kmnG"),f=c("bv9b"),g=c("0IaG"),b=c("d3UM"),v=c("3Pt+"),D=c("/1cH"),y=c("iadO"),E=c("CV0D"),O=c("pxUr"),C=c("tyNb"),w=c("fXoL"),_=c("foWl"),x=c("ZF+8"),S=c("0MCZ"),k=c("mrSG"),M=c("0EQZ"),P=c("V3S8"),F=c("5eHb"),W=c("QibW");function I(e,t){1&e&&w.zc(0,"mat-progress-bar",8)}function j(e,t){if(1&e&&(w.Ec(0,"mat-radio-button",9),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.Wc("value",e),w.lc(1),w.od(" ",e.name," ")}}let L=(()=>{class e{constructor(e,t,c){this.branchesService=e,this.dialogRef=t,this.toastService=c,this.isLoading=!1,this.branches=[],this.selectedBranch=""}ngOnInit(){this.initPage()}initPage(){this.isLoading=!0,this.branchesService.getBranches().subscribe(e=>{this.branches=e.data,this.isLoading=!1},e=>this.isLoading=!1)}close(e=!0){this.dialogRef.close({selectedBranch:e?this.selectedBranch:null})}}return e.\u0275fac=function(t){return new(t||e)(w.yc(P.a),w.yc(g.h),w.yc(F.b))},e.\u0275cmp=w.sc({type:e,selectors:[["app-branches-modal"]],decls:11,vars:4,consts:[[1,"mat-typography"],["mode","indeterminate",4,"ngIf"],["id","example-radio-group-label"],["aria-labelledby","example-radio-group-label","name","bList",1,"example-radio-group",3,"ngModel","ngModelChange"],["class","example-radio-button","name","bList",3,"value",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close","click"],["mode","indeterminate"],["name","bList",1,"example-radio-button",3,"value"]],template:function(e,t){1&e&&(w.Ec(0,"mat-dialog-content",0),w.ld(1,I,1,0,"mat-progress-bar",1),w.Ec(2,"label",2),w.md(3,"select a branch: "),w.Dc(),w.Ec(4,"mat-radio-group",3),w.Mc("ngModelChange",(function(e){return t.selectedBranch=e})),w.ld(5,j,2,2,"mat-radio-button",4),w.Dc(),w.Dc(),w.Ec(6,"mat-dialog-actions",5),w.Ec(7,"button",6),w.Mc("click",(function(){return t.close(!1)})),w.md(8,"Cancel"),w.Dc(),w.Ec(9,"button",7),w.Mc("click",(function(){return t.close(!0)})),w.md(10,"Select"),w.Dc(),w.Dc()),2&e&&(w.lc(1),w.Wc("ngIf",t.isLoading),w.lc(3),w.Wc("ngModel",t.selectedBranch),w.lc(1),w.Wc("ngForOf",t.branches),w.lc(4),w.Wc("mat-dialog-close",!0))},directives:[g.f,i.l,W.b,v.m,v.p,i.k,g.c,r.a,g.d,f.a,W.a],styles:[".example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),e})();var R=c("JX91"),B=c("lJxs"),T=c("x3QV"),A=c("FKr1");function N(e,t){1&e&&w.zc(0,"mat-progress-bar",11)}function z(e,t){if(1&e&&(w.Ec(0,"mat-option",12),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.Wc("value",e),w.lc(1),w.od(" ",e.name," ")}}let $=(()=>{class e{constructor(e,t,c){this.driversService=e,this.dialogRef=t,this.toastService=c,this.isLoading=!1,this.drivers=[],this.selectedBranch="",this.myControl=new v.d}ngOnInit(){this.initPage()}initPage(){return Object(k.a)(this,void 0,void 0,(function*(){this.isLoading=!0,yield this.driversService.getDrivers().toPromise().then(e=>{this.drivers=e.data,this.isLoading=!1},e=>this.isLoading=!1),this.filteredOptions=this.myControl.valueChanges.pipe(Object(R.a)(""),Object(B.a)(e=>this._filter(e)))}))}_filter(e){let t="";return e&&(t=e.name.toLowerCase()),this.drivers.filter(e=>e.name.toLowerCase().includes(t))}getDisplayName(e){if(e)return e.name}close(e=!0){this.myControl.value.id?this.dialogRef.close({selectedDriver:e?this.myControl.value:null}):this.toastService.warning("Please select one of the available drivers.")}}return e.\u0275fac=function(t){return new(t||e)(w.yc(T.a),w.yc(g.h),w.yc(F.b))},e.\u0275cmp=w.sc({type:e,selectors:[["app-drivers-select-modal"]],decls:16,vars:8,consts:[[1,"mat-typography"],["mode","indeterminate",4,"ngIf"],[1,"example-form"],[1,"example-full-width"],["type","text","placeholder","pick one","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close","click"],["mode","indeterminate"],[3,"value"]],template:function(e,t){if(1&e&&(w.Ec(0,"mat-dialog-content",0),w.ld(1,N,1,0,"mat-progress-bar",1),w.Ec(2,"form",2),w.Ec(3,"mat-form-field",3),w.Ec(4,"mat-label"),w.md(5,"Select a driver"),w.Dc(),w.zc(6,"input",4),w.Ec(7,"mat-autocomplete",5,6),w.ld(9,z,2,2,"mat-option",7),w.Rc(10,"async"),w.Dc(),w.Dc(),w.Dc(),w.Dc(),w.Ec(11,"mat-dialog-actions",8),w.Ec(12,"button",9),w.Mc("click",(function(){return t.close(!1)})),w.md(13,"Cancel"),w.Dc(),w.Ec(14,"button",10),w.Mc("click",(function(){return t.close(!0)})),w.md(15,"Select"),w.Dc(),w.Dc()),2&e){const e=w.cd(8);w.lc(1),w.Wc("ngIf",t.isLoading),w.lc(5),w.Wc("formControl",t.myControl)("matAutocomplete",e),w.lc(1),w.Wc("displayWith",t.getDisplayName),w.lc(2),w.Wc("ngForOf",w.Sc(10,6,t.filteredOptions)),w.lc(5),w.Wc("mat-dialog-close",!1)}},directives:[g.f,i.l,v.u,v.n,v.o,h.b,h.f,p.b,v.b,D.c,v.m,v.e,D.a,i.k,g.c,r.a,g.d,f.a,A.l],pipes:[i.b],styles:[".example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),e})();var Q=c("+CeZ");function q(e,t){1&e&&w.zc(0,"mat-progress-bar",11)}function U(e,t){if(1&e&&(w.Ec(0,"mat-option",12),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.Wc("value",e),w.lc(1),w.od(" ",e.companyName," ")}}let J=(()=>{class e{constructor(e,t,c){this.userServiceService=e,this.dialogRef=t,this.toastService=c,this.isLoading=!1,this.users=[],this.selectedBranch="",this.myControl=new v.d}ngOnInit(){this.initPage()}initPage(){return Object(k.a)(this,void 0,void 0,(function*(){this.isLoading=!0,yield this.userServiceService.getUsers().toPromise().then(e=>{this.users=e.data.users,this.isLoading=!1},e=>this.isLoading=!1),this.filteredOptions=this.myControl.valueChanges.pipe(Object(R.a)(""),Object(B.a)(e=>this._filter(e)))}))}_filter(e){let t="";return e&&(t=e.companyName.toLowerCase()),this.users.filter(e=>e.companyName.toLowerCase().includes(t)&&e.roles&&e.roles[0]&&"client"==e.roles[0].name)}getDisplayName(e){if(e)return e.companyName}close(e=!0){this.myControl.value||this.myControl.value.id?this.dialogRef.close({selectedCompany:e?this.myControl.value:null}):this.toastService.warning("Please select one of the available companies.")}}return e.\u0275fac=function(t){return new(t||e)(w.yc(Q.a),w.yc(g.h),w.yc(F.b))},e.\u0275cmp=w.sc({type:e,selectors:[["app-companies-select-modal"]],decls:16,vars:8,consts:[[1,"mat-typography"],["mode","indeterminate",4,"ngIf"],[1,"example-form"],[1,"example-full-width"],["type","text","placeholder","pick one","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close","click"],["mode","indeterminate"],[3,"value"]],template:function(e,t){if(1&e&&(w.Ec(0,"mat-dialog-content",0),w.ld(1,q,1,0,"mat-progress-bar",1),w.Ec(2,"form",2),w.Ec(3,"mat-form-field",3),w.Ec(4,"mat-label"),w.md(5,"Select a company"),w.Dc(),w.zc(6,"input",4),w.Ec(7,"mat-autocomplete",5,6),w.ld(9,U,2,2,"mat-option",7),w.Rc(10,"async"),w.Dc(),w.Dc(),w.Dc(),w.Dc(),w.Ec(11,"mat-dialog-actions",8),w.Ec(12,"button",9),w.Mc("click",(function(){return t.close(!1)})),w.md(13,"Cancel"),w.Dc(),w.Ec(14,"button",10),w.Mc("click",(function(){return t.close(!0)})),w.md(15,"Select"),w.Dc(),w.Dc()),2&e){const e=w.cd(8);w.lc(1),w.Wc("ngIf",t.isLoading),w.lc(5),w.Wc("formControl",t.myControl)("matAutocomplete",e),w.lc(1),w.Wc("displayWith",t.getDisplayName),w.lc(2),w.Wc("ngForOf",w.Sc(10,6,t.filteredOptions)),w.lc(5),w.Wc("mat-dialog-close",!1)}},directives:[g.f,i.l,v.u,v.n,v.o,h.b,h.f,p.b,v.b,D.c,v.m,v.e,D.a,i.k,g.c,r.a,g.d,f.a,A.l],pipes:[i.b],styles:[".example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),e})();var H=c("KJae"),G=c("MfUg"),K=c("vzMs");function V(e,t){if(1&e&&(w.Ec(0,"mat-option",25),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.Wc("value",e),w.lc(1),w.od(" ",e," ")}}function Z(e,t){if(1&e&&(w.Ec(0,"mat-option",25),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.Wc("value",e),w.lc(1),w.nd(e)}}function X(e,t){if(1&e&&(w.Ec(0,"mat-option",25),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.Wc("value",e.id),w.lc(1),w.nd(e.name)}}function Y(e,t){if(1&e&&(w.Ec(0,"mat-option",25),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.Wc("value",e),w.lc(1),w.nd(e)}}function ee(e,t){if(1&e&&(w.Ec(0,"mat-option",25),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.Wc("value",e.id),w.lc(1),w.nd(e.name)}}function te(e,t){if(1&e&&(w.Ec(0,"mat-form-field",3),w.Ec(1,"mat-label"),w.md(2,"Branch"),w.Dc(),w.Ec(3,"mat-select",26),w.ld(4,ee,2,2,"mat-option",9),w.Dc(),w.Dc()),2&e){const e=w.Qc();w.Wc("floatLabel","auto"),w.lc(4),w.Wc("ngForOf",e.branches)}}function ce(e,t){if(1&e&&(w.Ec(0,"mat-option",25),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.Wc("value",e.id),w.lc(1),w.nd(e.companyName)}}function ie(e,t){if(1&e&&(w.Ec(0,"mat-form-field",3),w.Ec(1,"mat-label"),w.md(2,"Company"),w.Dc(),w.Ec(3,"mat-select",27),w.ld(4,ce,2,2,"mat-option",9),w.Dc(),w.Dc()),2&e){const e=w.Qc();w.Wc("floatLabel","auto"),w.lc(4),w.Wc("ngForOf",e.users)}}function re(e,t){if(1&e&&(w.Ec(0,"mat-option",28),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.Wc("disabled",e.disabled)("value",e.value),w.lc(1),w.od("",e.value," ")}}let ae=(()=>{class e{constructor(e,t,c,i,r,a,n,s,o){this.branchesService=e,this.driverService=t,this.ordersService=c,this.usersService=i,this.authService=r,this.fb=a,this.dialogRef=n,this.data=s,this.toastService=o,this.isLoading=!1,this.branches=[],this.drivers=[],this.users=[],this.selectedBranch="",this.isSubmittingForm=!1,this.userRole="",this.statuses=[{value:"pending",disabled:!1},{value:"assigned",disabled:!1},{value:"spotOrder",disabled:!1},{value:"finished",disabled:!1},{value:"returned",disabled:!1}],this.serviceType=[],this.currency=["LL","$","cheque(LL)","cheque($)"],this.addressLocations=[],this.addressesControl=new v.d,this.mainObj=s}ngOnInit(){this.initPage()}initPage(){return Object(k.a)(this,void 0,void 0,(function*(){this.userRole=this.authService.currentUserRole(),this.serviceType=this.ordersService.serviceTypes,this.addressLocations=this.ordersService.addressLocations,this.ordersForm=new v.g({shipmentCode:new v.d("update"==this.mainObj.action?this.mainObj.order.shipmentCode:"",[v.t.required,v.t.minLength(4)]),weight:new v.d("update"==this.mainObj.action?this.mainObj.order.weight:"1 Kg",[v.t.required]),receiverName:new v.d("update"==this.mainObj.action?this.mainObj.order.receiverName:"",[v.t.required]),receiverPhone:new v.d("update"==this.mainObj.action?this.mainObj.order.receiverPhone:"",[v.t.required]),receiverAddress:new v.d("update"==this.mainObj.action?this.mainObj.order.receiverAddress:"",[v.t.required]),receiverLandmark:new v.d("update"==this.mainObj.action?this.mainObj.order.receiverLandmark:"",[v.t.required]),fees:new v.d({disabled:"update"===this.mainObj.action&&"admin"!=this.userRole,value:"update"==this.mainObj.action?this.mainObj.order.fees:""},[v.t.required]),currency:new v.d("update"==this.mainObj.action?this.mainObj.order.currency:this.currency[0],[v.t.required]),serviceType:new v.d("update"==this.mainObj.action?this.mainObj.order.serviceType:this.serviceType[0],[v.t.required]),status:new v.d({value:"update"==this.mainObj.action?this.mainObj.order.status:this.statuses[0].value,disabled:"update"!=this.mainObj.action},[v.t.required]),itemDescription:new v.d("update"==this.mainObj.action?this.mainObj.order.itemDescription:"",[]),comment:new v.d("update"==this.mainObj.action?this.mainObj.order.comment:"",[]),driverId:new v.d({disabled:!0,value:"update"==this.mainObj.action&&this.mainObj.order.driver?this.mainObj.order.driver.id:""},[]),branchId:new v.d("update"==this.mainObj.action&&this.mainObj.order.branch?this.mainObj.order.branch.id:"",[]),customerId:new v.d("update"==this.mainObj.action&&this.mainObj.order.client?this.mainObj.order.client.id:"",[]),isPaid:new v.d({value:"update"==this.mainObj.action&&this.mainObj.order.isPaid,disabled:"update"==this.mainObj.action&&"finished"!=this.mainObj.order.status&&"canceled"!=this.mainObj.order.status&&"returned"!=this.mainObj.order.status||"admin"!=this.userRole&&"accountant"!=this.userRole},[v.t.required])}),this.isLoading=!0,"client"!=this.userRole&&(yield this.branchesService.getBranches().subscribe(e=>{this.branches=e.data,this.isLoading=!1},e=>this.isLoading=!1),yield this.driverService.getDrivers().subscribe(e=>{this.drivers=e.data,this.isLoading=!1},e=>this.isLoading=!1),yield this.usersService.getUsers().subscribe(e=>{this.users=e.data.users,this.users=this.users.filter(e=>e.roles&&e.roles[0]&&"client"==e.roles[0].name),this.isLoading=!1},e=>this.isLoading=!1));for(let e=0;e<this.statuses.length;e++){let t=this.statuses[e];"manager"!=this.userRole&&"assigned"==t.value&&(this.statuses[e].disabled=!0),"pending"!=t.value&&"agent"!=this.userRole&&"accountant"!=this.userRole||(this.statuses[e].disabled=!0),this.mainObj&&this.mainObj.order&&("finished"==this.mainObj.order.status||"returned"==this.mainObj.order.status||"canceled"==this.mainObj.order.status||"pending"==this.mainObj.order.status&&"spotOrder"!=t.value||"assigned"==this.mainObj.order.status&&"spotOrder"==t.value)&&(this.statuses[e].disabled=!0),this.mainObj&&this.mainObj.order&&"spotOrder"==this.mainObj.order.status&&("finished"==t.value||"returned"==t.value)&&(this.statuses[e].disabled=!0)}"admin"!=this.userRole||"returned"!=this.mainObj.order.status&&"canceled"!=this.mainObj.order.status||(this.statuses=this.statuses.map(e=>(e.disabled=!1,e))),this.addressFilteredOptions=this.ordersForm.controls.receiverAddress.valueChanges.pipe(Object(R.a)(""),Object(B.a)(e=>this._filterAddresses(e)))}))}_filterAddresses(e){let t="";return e&&(t=e.toLowerCase()),this.addressLocations.filter(e=>e.toLowerCase().includes(t))}close(){this.dialogRef.close({})}submitForm(){if(this.ordersForm.valid){if(this.isSubmittingForm)return;this.isSubmittingForm=!0;const e=JSON.parse(JSON.stringify(this.ordersForm.value));if(""==e.branchId&&delete e.branchId,""==e.customerId){const t=this.authService.getUser();"client"==this.userRole?e.customerId=t.id:delete e.customerId}""==e.driverId&&delete e.driverId,e.status=e.status||this.ordersForm.controls.status.value,e.fees=e.fees||this.ordersForm.controls.fees.value,e.isPaid=e.isPaid||!1,"update"===this.mainObj.action?this.ordersService.updateOrder(e,this.mainObj.order.id).subscribe(e=>{this.close(),this.isSubmittingForm=!1},e=>{this.isSubmittingForm=!1}):this.ordersService.createOrder(e).subscribe(e=>{this.close(),this.isSubmittingForm=!1},e=>{this.isSubmittingForm=!1})}else this.toastService.error("please fill the missing fields")}}return e.\u0275fac=function(t){return new(t||e)(w.yc(P.a),w.yc(H.a),w.yc(G.a),w.yc(K.a),w.yc(_.a),w.yc(v.c),w.yc(g.h),w.yc(g.a),w.yc(F.b))},e.\u0275cmp=w.sc({type:e,selectors:[["app-orders-modal"]],decls:73,vars:29,consts:[["mat-dialog-title",""],[1,"orders-form"],[1,"form",3,"formGroup","ngSubmit"],["appearance","outline",1,"mat",3,"floatLabel"],["matInput","","placeholder","Shipment code","required","","type","text","formControlName","shipmentCode"],["matInput","","placeholder","Receiver name","type","text","required","","formControlName","receiverName"],["matInput","","placeholder","Receiver phone","type","tel","required","","formControlName","receiverPhone"],["type","text","placeholder","pick one","matInput","","formControlName","receiverAddress",3,"matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Receiver landmark","required","","type","text","formControlName","receiverLandmark"],["matInput","","placeholder","Item description","type","textarea","formControlName","itemDescription"],["matInput","","placeholder","Comment","type","textarea","formControlName","comment"],["matInput","","type","number","required","","formControlName","fees",3,"placeholder"],["required","","formControlName","currency"],["formControlName","driverId"],["required","","formControlName","serviceType"],["class","mat","appearance","outline",3,"floatLabel",4,"ngIf"],["matInput","","type","text","required","","formControlName","weight",3,"placeholder"],["required","","formControlName","status"],[3,"disabled","value",4,"ngFor","ngForOf"],["formControlName","isPaid",1,"mat"],["align","end"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","","cdkFocusInitial","",3,"click"],[3,"value"],["formControlName","branchId"],["formControlName","customerId"],[3,"disabled","value"]],template:function(e,t){if(1&e&&(w.Ec(0,"h2",0),w.md(1),w.Dc(),w.Ec(2,"mat-dialog-content",1),w.Ec(3,"form",2),w.Mc("ngSubmit",(function(){return t.submitForm()})),w.Ec(4,"mat-form-field",3),w.Ec(5,"mat-label"),w.md(6,"Shipment Code:"),w.Dc(),w.zc(7,"input",4),w.Dc(),w.Ec(8,"mat-form-field",3),w.Ec(9,"mat-label"),w.md(10,"Receiver Name:"),w.Dc(),w.zc(11,"input",5),w.Dc(),w.Ec(12,"mat-form-field",3),w.Ec(13,"mat-label"),w.md(14,"Receiver Phone:"),w.Dc(),w.zc(15,"input",6),w.Dc(),w.Ec(16,"mat-form-field",3),w.Ec(17,"mat-label"),w.md(18,"Receiver Address"),w.Dc(),w.zc(19,"input",7),w.Ec(20,"mat-autocomplete",null,8),w.ld(22,V,2,2,"mat-option",9),w.Rc(23,"async"),w.Dc(),w.Dc(),w.Ec(24,"mat-form-field",3),w.Ec(25,"mat-label"),w.md(26,"Receiver Landmark:"),w.Dc(),w.zc(27,"input",10),w.Dc(),w.Ec(28,"mat-form-field",3),w.Ec(29,"mat-label"),w.md(30,"Item description:"),w.Dc(),w.zc(31,"input",11),w.Dc(),w.Ec(32,"mat-form-field",3),w.Ec(33,"mat-label"),w.md(34,"Comment:"),w.Dc(),w.zc(35,"input",12),w.Dc(),w.Ec(36,"mat-form-field",3),w.Ec(37,"mat-label"),w.md(38,"Cash Collection:"),w.Dc(),w.zc(39,"input",13),w.Dc(),w.Ec(40,"mat-form-field",3),w.Ec(41,"mat-label"),w.md(42,"Currency"),w.Dc(),w.Ec(43,"mat-select",14),w.ld(44,Z,2,2,"mat-option",9),w.Dc(),w.Dc(),w.Ec(45,"mat-form-field",3),w.Ec(46,"mat-label"),w.md(47,"Driver(Only manager can assign a driver)"),w.Dc(),w.Ec(48,"mat-select",15),w.ld(49,X,2,2,"mat-option",9),w.Dc(),w.Dc(),w.Ec(50,"mat-form-field",3),w.Ec(51,"mat-label"),w.md(52,"Service type"),w.Dc(),w.Ec(53,"mat-select",16),w.ld(54,Y,2,2,"mat-option",9),w.Dc(),w.Dc(),w.ld(55,te,5,2,"mat-form-field",17),w.ld(56,ie,5,2,"mat-form-field",17),w.Ec(57,"mat-form-field",3),w.Ec(58,"mat-label"),w.md(59,"Weight in Kg"),w.Dc(),w.zc(60,"input",18),w.Dc(),w.Ec(61,"mat-form-field",3),w.Ec(62,"mat-label"),w.md(63,"Status"),w.Dc(),w.Ec(64,"mat-select",19),w.ld(65,re,2,3,"mat-option",20),w.Dc(),w.Dc(),w.Ec(66,"mat-checkbox",21),w.md(67," Close "),w.Dc(),w.Dc(),w.Dc(),w.Ec(68,"mat-dialog-actions",22),w.Ec(69,"button",23),w.Mc("click",(function(){return t.close()})),w.md(70,"Cancel"),w.Dc(),w.Ec(71,"button",24),w.Mc("click",(function(){return t.submitForm()})),w.md(72),w.Dc(),w.Dc()),2&e){const e=w.cd(21);w.lc(1),w.od("",t.mainObj.action," order"),w.lc(2),w.Wc("formGroup",t.ordersForm),w.lc(1),w.Wc("floatLabel","auto")("floatLabel","auto"),w.lc(4),w.Wc("floatLabel","auto"),w.lc(4),w.Wc("floatLabel","auto"),w.lc(4),w.Wc("floatLabel","auto"),w.lc(3),w.Wc("matAutocomplete",e),w.lc(3),w.Wc("ngForOf",w.Sc(23,27,t.addressFilteredOptions)),w.lc(2),w.Wc("floatLabel","auto"),w.lc(4),w.Wc("floatLabel","auto"),w.lc(4),w.Wc("floatLabel","auto"),w.lc(4),w.Wc("floatLabel","auto"),w.lc(3),w.Wc("placeholder","Fees"+("admin"!=t.userRole&&"update"===t.mainObj.action?"(Only admin can update the fees)":"")),w.lc(1),w.Wc("floatLabel","auto"),w.lc(4),w.Wc("ngForOf",t.currency),w.lc(1),w.Wc("floatLabel","auto"),w.lc(4),w.Wc("ngForOf",t.drivers),w.lc(1),w.Wc("floatLabel","auto"),w.lc(4),w.Wc("ngForOf",t.serviceType),w.lc(1),w.Wc("ngIf","client"!==t.userRole),w.lc(1),w.Wc("ngIf","client"!==t.userRole),w.lc(1),w.Wc("floatLabel","auto"),w.lc(3),w.Wc("placeholder","Weight in Kg"),w.lc(1),w.Wc("floatLabel","auto"),w.lc(4),w.Wc("ngForOf",t.statuses),w.lc(7),w.nd(t.mainObj.action)}},directives:[g.i,g.f,v.u,v.n,v.h,h.b,h.f,p.b,v.b,v.s,v.m,v.f,D.c,D.a,i.k,v.q,b.a,i.l,m.a,g.c,r.a,g.d,A.l],pipes:[i.b],styles:[".form[_ngcontent-%COMP%]{width:100%}.form__input[_ngcontent-%COMP%]{width:100%;margin-top:6px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.form-actions__login[_ngcontent-%COMP%]{margin-right:10px}.form-actions__forget[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:#536dfe}.mat[_ngcontent-%COMP%]{margin:10px}.mat4[_ngcontent-%COMP%]{background-color:tomato;margin-left:60px}.orders-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:5px 10px}"]}),e})();function ne(e,t){if(1&e&&(w.Ec(0,"mat-option",10),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.Wc("value",e),w.lc(1),w.od(" ",e," ")}}let se=(()=>{class e{constructor(e,t,c){this.ordersService=e,this.dialogRef=t,this.toastService=c,this.serviceTypes=[],this.myControl=new v.d}ngOnInit(){this.initPage()}initPage(){return Object(k.a)(this,void 0,void 0,(function*(){this.serviceTypes=this.ordersService.serviceTypes,this.filteredOptions=this.myControl.valueChanges.pipe(Object(R.a)(""),Object(B.a)(e=>this._filter(e)))}))}_filter(e){let t="";return e&&(t=e.toLowerCase()),this.serviceTypes.filter(e=>e.toLowerCase().includes(t))}getDisplayName(e){if(e)return e}close(e=!0){this.myControl.value?this.dialogRef.close({selectedService:e?this.myControl.value:null}):this.toastService.warning("Please select one of the available services.")}}return e.\u0275fac=function(t){return new(t||e)(w.yc(G.a),w.yc(g.h),w.yc(F.b))},e.\u0275cmp=w.sc({type:e,selectors:[["app-service-type-select-modal"]],decls:15,vars:7,consts:[[1,"mat-typography"],[1,"example-form"],[1,"example-full-width"],["type","text","placeholder","pick one","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close","click"],[3,"value"]],template:function(e,t){if(1&e&&(w.Ec(0,"mat-dialog-content",0),w.Ec(1,"form",1),w.Ec(2,"mat-form-field",2),w.Ec(3,"mat-label"),w.md(4,"Select a service"),w.Dc(),w.zc(5,"input",3),w.Ec(6,"mat-autocomplete",4,5),w.ld(8,ne,2,2,"mat-option",6),w.Rc(9,"async"),w.Dc(),w.Dc(),w.Dc(),w.Dc(),w.Ec(10,"mat-dialog-actions",7),w.Ec(11,"button",8),w.Mc("click",(function(){return t.close(!1)})),w.md(12,"Cancel"),w.Dc(),w.Ec(13,"button",9),w.Mc("click",(function(){return t.close(!0)})),w.md(14,"Select"),w.Dc(),w.Dc()),2&e){const e=w.cd(7);w.lc(5),w.Wc("formControl",t.myControl)("matAutocomplete",e),w.lc(1),w.Wc("displayWith",t.getDisplayName),w.lc(2),w.Wc("ngForOf",w.Sc(9,5,t.filteredOptions)),w.lc(5),w.Wc("mat-dialog-close",!1)}},directives:[g.f,v.u,v.n,v.o,h.b,h.f,p.b,v.b,D.c,v.m,v.e,D.a,i.k,g.c,r.a,g.d,A.l],pipes:[i.b],styles:[".example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),e})();const oe=["orderPrint"];function le(e,t){1&e&&w.zc(0,"mat-progress-bar",18)}function de(e,t){1&e&&(w.Ec(0,"p",19),w.md(1,"Orders List"),w.Dc())}function me(e,t){if(1&e){const e=w.Fc();w.Ec(0,"div",20),w.Ec(1,"div",21),w.Ec(2,"mat-icon",13),w.md(3,"search"),w.Dc(),w.Dc(),w.Ec(4,"input",22),w.Mc("keyup",(function(t){return w.ed(e),w.Qc().applyFilter(t)})),w.Dc(),w.Ec(5,"button",12),w.Mc("click",(function(){return w.ed(e),w.Qc().showFilterInput()})),w.Ec(6,"mat-icon",13),w.md(7,"close"),w.Dc(),w.Dc(),w.Dc()}}function ue(e,t){if(1&e){const e=w.Fc();w.Ec(0,"button",23),w.Mc("click",(function(){return w.ed(e),w.Qc().deleteSelected()})),w.md(1,"Delete"),w.Dc()}}function pe(e,t){if(1&e){const e=w.Fc();w.Ec(0,"button",24),w.Mc("click",(function(){return w.ed(e),w.Qc().transferSelected()})),w.md(1,"Transfer to branch"),w.Dc()}}function he(e,t){if(1&e){const e=w.Fc();w.Ec(0,"button",25),w.Mc("click",(function(){w.ed(e);const c=t.$implicit;return w.Qc().onFilterSelect(c)})),w.md(1),w.Dc()}if(2&e){const e=t.$implicit;w.lc(1),w.od(" ",e.name," ")}}function fe(e,t){if(1&e){const e=w.Fc();w.Ec(0,"button",25),w.Mc("click",(function(){w.ed(e);const c=t.$implicit;return w.Qc().onActionSelect(c)})),w.md(1),w.Dc()}if(2&e){const e=t.$implicit;w.lc(1),w.od(" ",e.name," ")}}function ge(e,t){if(1&e){const e=w.Fc();w.Ec(0,"button",23),w.Mc("click",(function(){return w.ed(e),w.Qc().clearFilter()})),w.md(1),w.Dc()}if(2&e){const e=w.Qc();w.lc(1),w.od("Clear ",e.currentFilter.key," filter")}}function be(e,t){if(1&e){const e=w.Fc();w.Ec(0,"th",55),w.Ec(1,"mat-checkbox",56),w.Mc("change",(function(t){w.ed(e);const c=w.Qc(2);return t?c.masterToggle():null})),w.Dc(),w.Dc()}if(2&e){const e=w.Qc(2);w.lc(1),w.Wc("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function ve(e,t){if(1&e){const e=w.Fc();w.Ec(0,"td",57),w.Ec(1,"mat-checkbox",58),w.Mc("click",(function(t){return w.ed(e),t.stopPropagation()}))("change",(function(c){w.ed(e);const i=t.$implicit,r=w.Qc(2);return c?r.selection.toggle(i):null})),w.Dc(),w.Dc()}if(2&e){const e=t.$implicit,c=w.Qc(2);w.lc(1),w.Wc("checked",c.selection.isSelected(e))("aria-label",c.checkboxLabel(e))}}function De(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Code "),w.Dc())}function ye(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.od(" ",e.id," ")}}function Ee(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Shipment Code "),w.Dc())}function Oe(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.od(" ",e.shipmentCode," ")}}function Ce(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Receiver Name "),w.Dc())}function we(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.od(" ",e.receiverName," ")}}function _e(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Receiver Phone "),w.Dc())}function xe(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.od(" ",e.receiverPhone," ")}}function Se(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Receiver Address "),w.Dc())}function ke(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.od(" ",e.receiverAddress," ")}}function Me(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Receiver Landmark "),w.Dc())}function Pe(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.od(" ",e.receiverLandmark," ")}}function Fe(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Cash Collection "),w.Dc())}function We(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.od(" ",e.fees+" "+(e.currency||"")," ")}}function Ie(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Status "),w.Dc())}function je(e,t){if(1&e&&(w.Ec(0,"td",60),w.Ec(1,"div",61),w.Ec(2,"span"),w.md(3),w.Dc(),w.Dc(),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.Wc("ngClass",e.status),w.lc(2),w.nd(e.status)}}function Le(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Comment "),w.Dc())}function Re(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.od(" ",e.comment," ")}}function Be(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Weight "),w.Dc())}function Te(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.od(" ",e.weight," ")}}function Ae(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Service Type "),w.Dc())}function Ne(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.od(" ",e.serviceType," ")}}function ze(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Item Description "),w.Dc())}function $e(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.od(" ",e.itemDescription," ")}}function Qe(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Company Name "),w.Dc())}function qe(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.od(" ",(null==e.client?null:e.client.companyName)+" ("+(null==e.client?null:e.client.phone)+")"," ")}}function Ue(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Driver Name "),w.Dc())}function Je(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.od(" ",((null==e.driver?null:e.driver.name)||"")+" ("+((null==e.driver?null:e.driver.phone)||"")+")"," ")}}function He(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Branch "),w.Dc())}function Ge(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Dc()),2&e){const e=t.$implicit,c=w.Qc(2);w.lc(1),w.od(" ",c.transfered?null==e.lastTransferBranch?null:e.lastTransferBranch.name:null==e.branch?null:e.branch.name," ")}}function Ke(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Closed "),w.Dc())}function Ve(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.od(" ",e.isPaid?"Yes":"No"," ")}}function Ze(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Created At "),w.Dc())}function Xe(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Rc(2,"date"),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.od(" ",w.Tc(2,1,e.created_at,"M/d/yy, h:mm a")," ")}}function Ye(e,t){1&e&&(w.Ec(0,"th",59),w.md(1," Created By "),w.Dc())}function et(e,t){if(1&e&&(w.Ec(0,"td",60),w.md(1),w.Dc()),2&e){const e=t.$implicit;w.lc(1),w.od(" ",e.createdBy," ")}}function tt(e,t){1&e&&w.zc(0,"th",59)}function ct(e,t){if(1&e){const e=w.Fc();w.Ec(0,"td",60),w.Ec(1,"button",62),w.Mc("click",(function(c){w.ed(e);const i=t.$implicit;return w.Qc(2).updateOrder(i,c)})),w.md(2,"Update"),w.Dc(),w.Dc()}if(2&e){const e=w.Qc(2);w.lc(1),w.Wc("disabled","admin"!=e.userRole&&"finished"==e.status)}}function it(e,t){1&e&&w.zc(0,"th",59)}function rt(e,t){if(1&e){const e=w.Fc();w.Ec(0,"td",60),w.Ec(1,"button",63),w.Mc("click",(function(c){w.ed(e);const i=t.$implicit;return w.Qc(2).delayOrder(i,c)})),w.md(2),w.Dc(),w.Dc()}if(2&e){const e=t.$implicit;w.lc(2),w.od(" ",e.isDelayed?"Mark as non delayed":"Delay","")}}function at(e,t){1&e&&w.zc(0,"th",59)}function nt(e,t){if(1&e){const e=w.Fc();w.Ec(0,"td",60),w.Ec(1,"button",63),w.Mc("click",(function(c){w.ed(e);const i=t.$implicit;return w.Qc(2).confirmOrder(i,c)})),w.md(2," Confirm order"),w.Dc(),w.Dc()}}function st(e,t){1&e&&w.zc(0,"tr",64)}function ot(e,t){if(1&e){const e=w.Fc();w.Ec(0,"tr",65),w.Mc("click",(function(){w.ed(e);const c=t.$implicit;return w.Qc(2).selection.toggle(c)})),w.Dc()}}function lt(e,t){if(1&e&&(w.Ec(0,"table",26),w.Cc(1,27),w.ld(2,be,2,3,"th",28),w.ld(3,ve,2,2,"td",29),w.Bc(),w.Cc(4,30),w.ld(5,De,2,0,"th",31),w.ld(6,ye,2,1,"td",32),w.Bc(),w.Cc(7,33),w.ld(8,Ee,2,0,"th",31),w.ld(9,Oe,2,1,"td",32),w.Bc(),w.Cc(10,34),w.ld(11,Ce,2,0,"th",31),w.ld(12,we,2,1,"td",32),w.Bc(),w.Cc(13,35),w.ld(14,_e,2,0,"th",31),w.ld(15,xe,2,1,"td",32),w.Bc(),w.Cc(16,36),w.ld(17,Se,2,0,"th",31),w.ld(18,ke,2,1,"td",32),w.Bc(),w.Cc(19,37),w.ld(20,Me,2,0,"th",31),w.ld(21,Pe,2,1,"td",32),w.Bc(),w.Cc(22,38),w.ld(23,Fe,2,0,"th",31),w.ld(24,We,2,1,"td",32),w.Bc(),w.Cc(25,39),w.ld(26,Ie,2,0,"th",31),w.ld(27,je,4,2,"td",32),w.Bc(),w.Cc(28,40),w.ld(29,Le,2,0,"th",31),w.ld(30,Re,2,1,"td",32),w.Bc(),w.Cc(31,41),w.ld(32,Be,2,0,"th",31),w.ld(33,Te,2,1,"td",32),w.Bc(),w.Cc(34,42),w.ld(35,Ae,2,0,"th",31),w.ld(36,Ne,2,1,"td",32),w.Bc(),w.Cc(37,43),w.ld(38,ze,2,0,"th",31),w.ld(39,$e,2,1,"td",32),w.Bc(),w.Cc(40,44),w.ld(41,Qe,2,0,"th",31),w.ld(42,qe,2,1,"td",32),w.Bc(),w.Cc(43,45),w.ld(44,Ue,2,0,"th",31),w.ld(45,Je,2,1,"td",32),w.Bc(),w.Cc(46,46),w.ld(47,He,2,0,"th",31),w.ld(48,Ge,2,1,"td",32),w.Bc(),w.Cc(49,47),w.ld(50,Ke,2,0,"th",31),w.ld(51,Ve,2,1,"td",32),w.Bc(),w.Cc(52,48),w.ld(53,Ze,2,0,"th",31),w.ld(54,Xe,3,4,"td",32),w.Bc(),w.Cc(55,49),w.ld(56,Ye,2,0,"th",31),w.ld(57,et,2,1,"td",32),w.Bc(),w.Cc(58,50),w.ld(59,tt,1,0,"th",31),w.ld(60,ct,3,1,"td",32),w.Bc(),w.Cc(61,51),w.ld(62,it,1,0,"th",31),w.ld(63,rt,3,1,"td",32),w.Bc(),w.Cc(64,52),w.ld(65,at,1,0,"th",31),w.ld(66,nt,3,0,"td",32),w.Bc(),w.ld(67,st,1,0,"tr",53),w.ld(68,ot,1,0,"tr",54),w.Dc()),2&e){const e=w.Qc();w.Wc("dataSource",e.dataSource),w.lc(67),w.Wc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),w.lc(1),w.Wc("matRowDefColumns",e.displayedColumns)}}function dt(e,t){if(1&e){const e=w.Fc();w.Ec(0,"div",66),w.Ec(1,"mat-paginator",67),w.Mc("page",(function(t){return w.ed(e),w.Qc().pageChanged(t)})),w.Dc(),w.Dc()}if(2&e){const e=w.Qc();w.lc(1),w.Wc("hidePageSize",!0)("pageSize",e.paginationObj.per_page)("length",e.paginationObj.total)}}function mt(e,t){if(1&e&&(w.Ec(0,"div"),w.Ec(1,"div",70),w.zc(2,"img",71),w.Ec(3,"p",72),w.md(4," Id: "),w.zc(5,"br"),w.md(6),w.Dc(),w.Ec(7,"p",72),w.md(8," SHIPMENT CODE: "),w.zc(9,"br"),w.md(10),w.Dc(),w.Dc(),w.Ec(11,"div",73),w.Ec(12,"div",74),w.Ec(13,"div",75),w.Ec(14,"h3"),w.md(15,"From"),w.Dc(),w.zc(16,"hr"),w.Dc(),w.Ec(17,"div"),w.Ec(18,"p"),w.Ec(19,"span",76),w.md(20," Company:"),w.Dc(),w.md(21),w.Dc(),w.Ec(22,"p"),w.Ec(23,"span",76),w.md(24,"Sevice Type:"),w.Dc(),w.md(25),w.Dc(),w.Dc(),w.Dc(),w.Ec(26,"div",74),w.Ec(27,"div",75),w.Ec(28,"h3"),w.md(29,"To"),w.Dc(),w.zc(30,"hr"),w.Dc(),w.Ec(31,"div"),w.Ec(32,"p"),w.Ec(33,"span",76),w.md(34,"Id:"),w.Dc(),w.md(35),w.Dc(),w.Ec(36,"p"),w.Ec(37,"span",76),w.md(38,"Receiver Name:"),w.Dc(),w.md(39),w.Dc(),w.Ec(40,"p"),w.Ec(41,"span",76),w.md(42,"Receiver Phone:"),w.Dc(),w.md(43),w.Dc(),w.Ec(44,"p"),w.Ec(45,"span",76),w.md(46,"Receiver Address:"),w.Dc(),w.md(47),w.Dc(),w.Ec(48,"p"),w.Ec(49,"span",76),w.md(50,"Receiver Landmark:"),w.Dc(),w.md(51),w.Dc(),w.Ec(52,"p"),w.Ec(53,"span",76),w.md(54,"Cash Collection:"),w.Dc(),w.md(55),w.Dc(),w.Ec(56,"p"),w.Ec(57,"span",76),w.md(58,"Currency:"),w.Dc(),w.md(59),w.Dc(),w.Ec(60,"p"),w.Ec(61,"span",76),w.md(62,"Item Description:"),w.Dc(),w.md(63),w.Dc(),w.Ec(64,"p"),w.Ec(65,"span",76),w.md(66,"Comment:"),w.Dc(),w.md(67),w.Dc(),w.Ec(68,"p"),w.Ec(69,"span",76),w.md(70,"Creation Date:"),w.Dc(),w.md(71),w.Rc(72,"date"),w.Dc(),w.Ec(73,"p"),w.Ec(74,"span",76),w.md(75,"Creation By:"),w.Dc(),w.md(76),w.Dc(),w.Dc(),w.Dc(),w.Dc(),w.zc(77,"hr"),w.Dc()),2&e){const e=t.$implicit;w.lc(6),w.od(" ",e.id," "),w.lc(4),w.od(" ",e.shipmentCode," "),w.lc(11),w.od(" ",null==e.client?null:e.client.companyName,""),w.lc(4),w.od(" ",e.serviceType,""),w.lc(10),w.od(" ",e.id,""),w.lc(4),w.od(" ",e.receiverName,""),w.lc(4),w.od(" ",e.receiverPhone,""),w.lc(4),w.od(" ",e.receiverAddress,""),w.lc(4),w.od(" ",e.receiverLandmark,""),w.lc(4),w.od(" ",e.fees,""),w.lc(4),w.od(" ",e.currency,""),w.lc(4),w.od(" ",e.itemDescription,""),w.lc(4),w.od(" ",e.comment,""),w.lc(4),w.od(" ",w.Tc(72,15,e.created_at,"M/d/yy,h:mm a"),""),w.lc(5),w.od(" ",e.createdBy,"")}}function ut(e,t){if(1&e&&(w.Ec(0,"div",68),w.ld(1,mt,78,18,"div",69),w.Dc()),2&e){const e=w.Qc();w.lc(1),w.Wc("ngForOf",e.ordersToPrint)}}let pt=(()=>{class e{constructor(e,t,c,i,r){this.dialog=e,this.cd=t,this.authService=c,this.ordersService=i,this.toastService=r,this.displayedColumns=["select","id","shipmentCode","receiverName","receiverPhone","receiverAddress","receiverLandmark","fees","status","comment","serviceType","itemDescription","weight","companyName","driverName","branch","isPaid","createdAt","createdBy","update","delay","confirm"],this.selection=new M.c(!0,[]),this.isLoading=!1,this.currentPage=1,this.userRole="",this.ordersToPrint=[],this.isShowFilterInput=!1,this.ordersTableData=[],this.moreActionsText="More actions",this.moreActions=[{key:"assignToDriver",name:"Assign to driver"},{key:"printOrders",name:"Print orders"},{key:"cancelOrders",name:"Cancel orders"}],this.filterByText="Filter by",this.filterByOptions=[{key:"driver",name:"Driver",value:null},{key:"company",name:"Company",value:null},{key:"serviceType",name:"Service Type",value:null},{key:"branch",name:"Branch",value:null}],this.currentFilter=null}ngOnInit(){this.initPage()}initPage(){this.userRole=this.authService.currentUserRole(),this.getOrders("")}getOrders(e){this.isLoading=!0,this.ordersService.getOrders(this.status,this.transfered,e,this.currentPage,this.currentFilter).subscribe(e=>{this.ordersTableData=e.data.orders,this.paginationObj=e.data.pagination,this.dataSource=new d.k(this.ordersTableData),this.dataSource.paginator=this.paginator,this.isLoading=!1,this.hideClientActions(),this.selection.clear()},e=>{this.isLoading=!1,this.selection.clear()})}hideClientActions(){"spotOrder"!=this.status&&(this.moreActions=this.moreActions.filter(e=>"assignToDriver"!=e.key),this.displayedColumns=this.displayedColumns.filter(e=>"delay"!=e)),this.transfered||(this.displayedColumns=this.displayedColumns.filter(e=>"confirm"!=e)),"client"==this.userRole&&(this.displayedColumns=this.displayedColumns.filter(e=>"update"!=e&&"confirm"!=e),this.moreActions=this.moreActions.filter(e=>"assignToDriver"!=e.key&&"cancelOrders"!=e.key),this.filterByOptions=this.filterByOptions.filter(e=>"driver"!=e.key&&"company"!=e.key)),"admin"!=this.userRole&&"manager"!=this.userRole&&(this.moreActions=this.moreActions.filter(e=>"cancelOrders"!=e.key)),"canceled"!=this.status&&"finished"!=this.status||(this.moreActions=this.moreActions.filter(e=>"cancelOrders"!=e.key))}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(e=>this.selection.select(e))}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"select":"deselect")+" all"}applyFilter(e){const t=e.target.value;this.currentPage=1,this.getOrders(t)}showFilterInput(){this.isShowFilterInput=!this.isShowFilterInput,this.dataSource=new d.k(this.ordersTableData),this.isShowFilterInput||(this.currentPage=1,this.getOrders(""))}assignToDriver(){const e=this.selection.selected||[],t=e.map(e=>e.id);0!=e.length?this.openDriversModal().then(e=>{e&&this.ordersService.assignToDriver({ordersIds:t},e.id).subscribe(e=>{"success"===e.status?(this.toastService.success(e.message),this.getOrders("")):this.toastService.error("Error occured while transfering orders","",{positionClass:"toast-top-center"})},e=>{this.toastService.error("Error occured while transfering orders","",{positionClass:"toast-top-center"})})}):this.toastService.warning("Please select at least one order!")}cancelOrders(){const e=this.selection.selected||[],t=e.map(e=>e.id);0!=e.length?confirm("Are you sure you want to cancel the selected orders?")&&this.ordersService.changeStatus({ordersIds:t,status:"canceled"}).subscribe(e=>{"success"===e.status?(this.toastService.success(e.message),this.getOrders("")):this.toastService.error("Error occured while canceling orders","",{positionClass:"toast-top-center"})},e=>{this.toastService.error("Error occured while canceling orders","",{positionClass:"toast-top-center"})}):this.toastService.warning("Please select at least one order!")}printOrder(){const e=this.selection.selected||[];if(0!=e.length){this.ordersToPrint=e,this.cd.detectChanges();var t=document.getElementById("orderPrint"),c=window.open("/","Print-Window");c.document.write('<html><head><style>.float-container {display: flex;border: 3px solid #000;margin: 10px;padding: 20px;} .print-header{display: inline-block;width: 10%;vertical-align: top;padding: 40px;font-size: 20px;font-weight: 800;background: white;margin: 0px 20px;}.float-child {flex: 1;width: 50%;padding: 20px;border: 2px solid gray;}.float-child:first-child {margin-right: 20px;}.bold {font-weight: bold;}</style></head><body onload="window.print()">'+t.innerHTML+"</body></html>"),c.document.close(),setTimeout((function(){c.close()}),10)}else this.toastService.warning("Please select at least one order!")}deleteSelected(){let e=this.selection.selected||[],t=e.map(e=>e.id);0!=e.length?confirm("Are you sure you want to delete the selected order(s)")&&this.ordersService.deleteOrders({ordersIds:t}).subscribe(e=>{"success"===e.status?(this.toastService.success(e.message),this.getOrders("")):this.toastService.error("Error occured while deleting the selected orders","",{positionClass:"toast-top-center"})},e=>{this.toastService.error("Error occured while deleting the selected orders","",{positionClass:"toast-top-center"})}):this.toastService.warning("Please select at least one order!")}transferSelected(){let e=this.selection.selected||[],t=e.map(e=>e.id);0!=e.length?this.openBranchesModal().then(e=>{e&&this.ordersService.transferOrders({ordersIds:t},e.id).subscribe(e=>{"success"===e.status?(this.toastService.success(e.message),this.getOrders("")):this.toastService.error("Error occured while transfering orders","",{positionClass:"toast-top-center"})},e=>{this.toastService.error("Error occured while transfering orders","",{positionClass:"toast-top-center"})})}):this.toastService.warning("Please select at least one order!","",{positionClass:"toast-top-center"})}openBranchesModal(){return Object(k.a)(this,void 0,void 0,(function*(){return new Promise((e,t)=>{this.dialog.open(L).afterClosed().subscribe(t=>{e(t&&t.selectedBranch?t.selectedBranch:null)},t=>{e(null)})})}))}openDriversModal(){return Object(k.a)(this,void 0,void 0,(function*(){return new Promise((e,t)=>{this.dialog.open($).afterClosed().subscribe(t=>{e(t&&t.selectedDriver?t.selectedDriver:null)},t=>{e(null)})})}))}openCompanyModal(){return Object(k.a)(this,void 0,void 0,(function*(){return new Promise((e,t)=>{this.dialog.open(J).afterClosed().subscribe(t=>{e(t&&t.selectedCompany?t.selectedCompany:null)},t=>{e(null)})})}))}openServiceTypeModal(){return Object(k.a)(this,void 0,void 0,(function*(){return new Promise((e,t)=>{this.dialog.open(se).afterClosed().subscribe(t=>{e(t&&t.selectedService?t.selectedService:null)},t=>{e(null)})})}))}pageChanged(e){this.currentPage=e.pageIndex+1,this.getOrders("")}ngOnChanges(e){e.reload&&this.getOrders("")}updateOrder(e,t){t&&(t.preventDefault(),t.stopPropagation()),this.dialog.open(ae,{data:{action:"update",order:e},height:"600px",width:"860px"}).afterClosed().subscribe(e=>{this.selection.clear(),this.getOrders("")},e=>{this.masterToggle(),this.masterToggle()})}delayOrder(e,t){if(t&&(t.preventDefault(),t.stopPropagation()),this.masterToggle(),this.masterToggle(),"admin"!=this.userRole&&"manager"!=this.userRole)return void this.toastService.warning("User is not allowed to make this action");e.isDelayed=!e.isDelayed;const c=JSON.parse(JSON.stringify(e));c.barcode=c.barcode||"",c.comment=c.comment||"",c.customerId=c.client.id,c.branchId=c.branch?c.branch.id:null,c.driverId=c.driver?c.driver.id:null,this.ordersService.updateOrder(c,e.id).subscribe(e=>{})}confirmOrder(e,t){t&&(t.preventDefault(),t.stopPropagation()),this.masterToggle(),this.masterToggle(),e.isTransferedConfirmed=!0,e.lastTransferBranchId=null;const c=JSON.parse(JSON.stringify(e));c.barcode||delete c.barcode,c.comment||delete c.comment,c.barcode||delete c.barcode,c.branch&&(c.branchId=c.branch.id),c.driver&&(c.driverId=c.driver.id),c.client&&(c.customerId=c.client.id),c.isDelayed=c.isDelayed||!1,c.status="spotOrder",this.ordersService.updateOrder(c,e.id).subscribe(e=>{this.getOrders("")})}onActionSelect(e){switch(e.key){case"assignToDriver":this.assignToDriver();break;case"printOrders":this.printOrder();break;case"cancelOrders":this.cancelOrders()}}filterByDriver(e){this.currentFilter=e,this.openDriversModal().then(e=>{e&&(this.currentFilter.value=e.id,this.getOrders(""))})}filterByBranch(e){this.currentFilter=e,this.openBranchesModal().then(e=>{e&&(this.currentFilter.value=e.id,this.getOrders(""))})}filterByCompany(e){this.currentFilter=e,this.openCompanyModal().then(e=>{e&&(this.currentFilter.value=e.id,this.getOrders(""))})}filterByServiceType(e){this.currentFilter=e,this.openServiceTypeModal().then(e=>{e&&(this.currentFilter.value=e,this.getOrders(""))})}clearFilter(){this.currentFilter=null,this.getOrders("")}onFilterSelect(e){switch(e.key){case"driver":this.filterByDriver(e);break;case"company":this.filterByCompany(e);break;case"serviceType":this.filterByServiceType(e);break;case"branch":this.filterByBranch(e)}}}return e.\u0275fac=function(t){return new(t||e)(w.yc(g.b),w.yc(w.j),w.yc(_.a),w.yc(G.a),w.yc(F.b))},e.\u0275cmp=w.sc({type:e,selectors:[["app-orders-table"]],viewQuery:function(e,t){var c;1&e&&(w.jd(u.a,!0),w.jd(oe,!0)),2&e&&(w.bd(c=w.Nc())&&(t.paginator=c.first),w.bd(c=w.Nc())&&(t.MyDOMElement=c.first))},inputs:{status:"status",transfered:"transfered",reload:"reload"},features:[w.jc],decls:33,vars:15,consts:[[1,"orders-table-wrapper"],["mode","indeterminate",4,"ngIf"],[1,"orders-table-wrapper__header"],["class","orders-table-wrapper__title",4,"ngIf"],["class","orders-table-wrapper__search",4,"ngIf"],["mat-flat-button","","color","warn","class","orders-table-wrapper__all",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","class","orders-table-wrapper__all",3,"click",4,"ngIf"],[1,"orders-table-wrapper__all"],["color","accent","mat-raised-button","",3,"matMenuTriggerFor"],["menu1","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["menu2","matMenu"],["mat-mini-fab","",1,"orders-table-wrapper__button",3,"click"],[1,"orders-table-wrapper__icon"],[1,"orders-table__content",2,"height","60vh","overflow","auto"],["class","orders-table__table","mat-table","",3,"dataSource",4,"ngIf"],["class","pagination",4,"ngIf"],["id","orderPrint","class","printOnly",4,"ngIf"],["mode","indeterminate"],[1,"orders-table-wrapper__title"],[1,"orders-table-wrapper__search"],[1,"orders-table-wrapper__icon-wrapper"],["matInput","",1,"orders-table-wrapper__search-input",3,"keyup"],["mat-flat-button","","color","warn",1,"orders-table-wrapper__all",3,"click"],["mat-raised-button","","color","primary",1,"orders-table-wrapper__all",3,"click"],["mat-menu-item","",3,"click"],["mat-table","",1,"orders-table__table",3,"dataSource"],["matColumnDef","select"],["class","orders-table__table-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","orders-table__table-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["class","orders-table__table-header","mat-header-cell","",4,"matHeaderCellDef"],["class","orders-table__table-body","mat-cell","",4,"matCellDef"],["matColumnDef","shipmentCode"],["matColumnDef","receiverName"],["matColumnDef","receiverPhone"],["matColumnDef","receiverAddress"],["matColumnDef","receiverLandmark"],["matColumnDef","fees"],["matColumnDef","status"],["matColumnDef","comment"],["matColumnDef","weight"],["matColumnDef","serviceType"],["matColumnDef","itemDescription"],["matColumnDef","companyName"],["matColumnDef","driverName"],["matColumnDef","branch"],["matColumnDef","isPaid"],["matColumnDef","createdAt"],["matColumnDef","createdBy"],["matColumnDef","update"],["matColumnDef","delay"],["matColumnDef","confirm"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"orders-table__table-checkbox"],["color","primary",3,"checked","indeterminate","aria-label","change"],["mat-cell","",1,"orders-table__table-checkbox"],["color","primary",3,"checked","aria-label","click","change"],["mat-header-cell","",1,"orders-table__table-header"],["mat-cell","",1,"orders-table__table-body"],[1,"material-table__content-badge",3,"ngClass"],["mat-flat-button","","color","accent",1,"orders-table-wrapper__deleteBtn",3,"disabled","click"],["mat-flat-button","","color","accent",1,"orders-table-wrapper__deleteBtn",3,"click"],["mat-header-row",""],["mat-row","",3,"click"],[1,"pagination"],["showFirstLastButtons","",3,"hidePageSize","pageSize","length","page"],["id","orderPrint",1,"printOnly"],[4,"ngFor","ngForOf"],[2,"width","100%","text-align","center","background","black"],["src","assets/logo/logo-lg.jpeg",2,"width","50%","height","120px"],[2,"display","inline-block","padding","20px","margin-right","20px","vertical-align","top"],[1,"float-container",2,"page-break-after","always"],[1,"float-child"],[2,"text-align","center"],[1,"bold"]],template:function(e,t){if(1&e&&(w.Ec(0,"mat-card",0),w.ld(1,le,1,0,"mat-progress-bar",1),w.Ec(2,"mat-card-title",2),w.ld(3,de,2,0,"p",3),w.ld(4,me,8,0,"div",4),w.Ec(5,"div"),w.ld(6,ue,2,0,"button",5),w.ld(7,pe,2,0,"button",6),w.Ec(8,"span",7),w.Ec(9,"button",8),w.md(10),w.Ec(11,"mat-icon"),w.md(12,"arrow_drop_down"),w.Dc(),w.Dc(),w.Ec(13,"mat-menu",null,9),w.ld(15,he,2,1,"button",10),w.Dc(),w.Dc(),w.Ec(16,"span",7),w.Ec(17,"button",8),w.md(18),w.Ec(19,"mat-icon"),w.md(20,"arrow_drop_down"),w.Dc(),w.Dc(),w.Ec(21,"mat-menu",null,11),w.ld(23,fe,2,1,"button",10),w.Dc(),w.Dc(),w.Ec(24,"span",7),w.ld(25,ge,2,1,"button",5),w.Dc(),w.Ec(26,"button",12),w.Mc("click",(function(){return t.showFilterInput()})),w.Ec(27,"mat-icon",13),w.md(28,"search"),w.Dc(),w.Dc(),w.Dc(),w.Dc(),w.Ec(29,"mat-card-content",14),w.ld(30,lt,69,4,"table",15),w.ld(31,dt,2,3,"div",16),w.Dc(),w.Dc(),w.ld(32,ut,2,1,"div",17)),2&e){const e=w.cd(14),c=w.cd(22);w.lc(1),w.Wc("ngIf",t.isLoading),w.lc(2),w.Wc("ngIf",!t.isShowFilterInput),w.lc(1),w.Wc("ngIf",t.isShowFilterInput),w.lc(2),w.Wc("ngIf","admin"==t.userRole),w.lc(1),w.Wc("ngIf","manager"==t.userRole||"admin"==t.userRole),w.lc(2),w.Wc("matMenuTriggerFor",e),w.lc(1),w.od(" ",t.filterByText,""),w.lc(5),w.Wc("ngForOf",t.filterByOptions),w.lc(2),w.Wc("matMenuTriggerFor",c),w.lc(1),w.od(" ",t.moreActionsText,""),w.lc(5),w.Wc("ngForOf",t.moreActions),w.lc(2),w.Wc("ngIf",t.currentFilter),w.lc(5),w.Wc("ngIf",!t.isLoading),w.lc(1),w.Wc("ngIf",t.paginationObj),w.lc(1),w.Wc("ngIf",t.ordersToPrint.length>0)}},directives:[a.a,i.l,a.d,r.a,l.c,s.a,l.d,i.k,a.b,f.a,p.b,l.a,d.j,d.c,d.e,d.b,d.g,d.i,d.d,m.a,d.a,i.j,d.f,d.h,u.a],pipes:[i.e],styles:[".orders-table-wrapper[_ngcontent-%COMP%]{padding-left:0;padding-right:0;margin:16px 16px 32px;box-shadow:0 3px 11px 0 #e8eafc,0 3px 3px -2px hsla(0,0%,69.8%,.10196078431372549),0 1px 8px 0 hsla(0,0%,60.4%,.10196078431372549);max-width:100%;overflow-x:auto}.orders-table-wrapper__header[_ngcontent-%COMP%]{padding:0 24px;display:flex;align-items:center;justify-content:space-between}@media (max-width:576px){.orders-table-wrapper__header[_ngcontent-%COMP%]{padding:0 16px}}.orders-table-wrapper__title[_ngcontent-%COMP%]{margin:0}.orders-table-wrapper__search[_ngcontent-%COMP%]{display:flex;align-items:center}.orders-table-wrapper__icon-wrapper[_ngcontent-%COMP%]{height:46px;width:46px;display:flex;align-items:center;justify-content:center}.orders-table-wrapper__icon[_ngcontent-%COMP%]{color:inherit}.orders-table-wrapper__search-input[_ngcontent-%COMP%]{font-size:16px;height:32px;border:0;border-bottom:1px solid #6e6e6e;outline:none}@media (max-width:576px){.orders-table-wrapper__search-input[_ngcontent-%COMP%]{width:150px}}.orders-table-wrapper__search-input[_ngcontent-%COMP%]:focus{border-bottom:2px solid #536dfe}.orders-table-wrapper__button[_ngcontent-%COMP%]{box-shadow:none;background-color:inherit;width:46px;height:46px;color:#6e6e6e}.orders-table-wrapper__button[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.08);color:#536dfe}.orders-table-wrapper__transferBtn[_ngcontent-%COMP%]{margin-left:20px;margin-right:30px}.orders-table-wrapper__all[_ngcontent-%COMP%]{margin-right:10px}@media (max-width:576px){.orders-table__content[_ngcontent-%COMP%]{overflow-x:scroll}}.orders-table__table[_ngcontent-%COMP%]{width:100%;box-shadow:none}@media (max-width:576px){.orders-table__table[_ngcontent-%COMP%]{width:200%}}.orders-table__table-checkbox[_ngcontent-%COMP%]{width:32px;padding-left:24px}.orders-table__table-body[_ngcontent-%COMP%], .orders-table__table-header[_ngcontent-%COMP%]{padding:1rem;font-size:14px}.float-container[_ngcontent-%COMP%]{display:flex;border:3px solid #000;margin:10px;padding:20px}.float-child[_ngcontent-%COMP%]{flex:1;width:50%;padding:20px;border:2px solid grey}.float-child[_ngcontent-%COMP%]:first-child{margin-right:20px}.print-header[_ngcontent-%COMP%]{display:inline-block;width:10%;vertical-align:top;padding:40px;font-size:20px;font-weight:800;background:#fff;margin:0 20px}"]}),e})();var ht=c("jQpT");let ft=(()=>{class e{constructor(e,t,c,i){this.dialog=e,this.datepipe=t,this.apiService=i,this.status="finished",this.reload=!1,this.userRole="",this.events=[],this.selectedDate=new Date;let r=this.selectedDate.getDate()-7;this.selectedDate.setDate(r),this.userRole=c.currentUserRole()}generateCsvPaidOrders(){this.apiService.getAdvanced("orders/generatePaidOrders?date="+this.datepipe.transform(this.selectedDate,"yyyy-MM-dd"),"text/csv").subscribe(e=>{const t=new Blob([e],{type:"text/csv"});let c=URL.createObjectURL(t),i=document.createElement("a");i.href=c,i.download="paidOrders.csv",i.click(),setTimeout(()=>{URL.revokeObjectURL(c)},100)})}addEvent(e,t){this.selectedDate=t.value}}return e.\u0275fac=function(t){return new(t||e)(w.yc(g.b),w.yc(i.e),w.yc(_.a),w.yc(x.a))},e.\u0275cmp=w.sc({type:e,selectors:[["app-finished-orders-page"]],decls:17,vars:7,consts:[["role","heading",1,"page-header"],["appearance","fill",2,"margin-right","10px"],["matInput","",3,"matDatepicker","value","dateInput","dateChange"],["matSuffix","",3,"for"],["picker",""],["mat-raised-button","","color","primary",1,"orders-table-wrapper__transferBtn","inline-block",3,"disabled","click"],[1,"tables-wrapper"],[3,"status","reload","transfered"]],template:function(e,t){if(1&e&&(w.Ec(0,"app-layout"),w.Ec(1,"mat-toolbar",0),w.Ec(2,"h1"),w.md(3,"Finished orders"),w.Dc(),w.Ec(4,"div"),w.Ec(5,"mat-form-field",1),w.Ec(6,"mat-label"),w.md(7,"Orders After:"),w.Dc(),w.Ec(8,"input",2),w.Mc("dateInput",(function(e){return t.addEvent("input",e)}))("dateChange",(function(e){return t.addEvent("change",e)})),w.Dc(),w.zc(9,"mat-datepicker-toggle",3),w.zc(10,"mat-datepicker",null,4),w.Dc(),w.Ec(12,"button",5),w.Mc("click",(function(){return t.generateCsvPaidOrders()})),w.md(13,"Export paid orders"),w.Dc(),w.Dc(),w.Dc(),w.Ec(14,"div",6),w.zc(15,"app-orders-table",7),w.Dc(),w.zc(16,"app-footer"),w.Dc()),2&e){const e=w.cd(11);w.lc(8),w.Wc("matDatepicker",e)("value",t.selectedDate),w.lc(1),w.Wc("for",e),w.lc(3),w.Wc("disabled","admin"!=t.userRole&&"accountant"!=t.userRole),w.lc(3),w.Wc("status",t.status)("reload",t.reload)("transfered",!1)}},directives:[S.a,o.a,h.b,h.f,p.b,y.b,y.d,h.g,y.a,r.a,pt,ht.a],styles:[""]}),e})(),gt=(()=>{class e{constructor(e,t){this.dialog=e,this.apiService=t,this.status="pending",this.reload=!1}createOrder(){this.dialog.open(ae,{data:{action:"create",order:{}},height:"600px",width:"860px"}).afterClosed().subscribe(e=>{this.reload=!this.reload},e=>{})}}return e.\u0275fac=function(t){return new(t||e)(w.yc(g.b),w.yc(x.a))},e.\u0275cmp=w.sc({type:e,selectors:[["app-pending-orders-page"]],decls:10,vars:3,consts:[["role","heading",1,"page-header"],["mat-raised-button","","color","primary",1,"orders-table-wrapper__transferBtn",2,"margin-right","10px",3,"click"],[1,"tables-wrapper"],[3,"status","transfered","reload"]],template:function(e,t){1&e&&(w.Ec(0,"app-layout"),w.Ec(1,"mat-toolbar",0),w.Ec(2,"h1"),w.md(3,"Orders in progress"),w.Dc(),w.Ec(4,"div"),w.Ec(5,"button",1),w.Mc("click",(function(){return t.createOrder()})),w.md(6,"Create Order"),w.Dc(),w.Dc(),w.Dc(),w.Ec(7,"div",2),w.zc(8,"app-orders-table",3),w.Dc(),w.zc(9,"app-footer"),w.Dc()),2&e&&(w.lc(8),w.Wc("status",t.status)("transfered",!1)("reload",t.reload))},directives:[S.a,o.a,r.a,pt,ht.a],styles:[""]}),e})(),bt=(()=>{class e{constructor(e,t,c){this.dialog=e,this.datepipe=t,this.apiService=c,this.status="spotOrder",this.reload=!1,this.events=[],this.selectedDate=new Date;let i=this.selectedDate.getDate()-7;this.selectedDate.setDate(i)}openDriversModal(){return Object(k.a)(this,void 0,void 0,(function*(){return new Promise((e,t)=>{this.dialog.open($).afterClosed().subscribe(t=>{e(t&&t.selectedDriver?t.selectedDriver:null)},t=>{e(null)})})}))}generateCsvAssignedOrders(){this.openDriversModal().then(e=>{let t="";e&&(t=e.id);let c="?";c+="date="+this.datepipe.transform(this.selectedDate,"yyyy-MM-dd"),t&&(c+="&driverId="+t),this.apiService.getAdvanced("orders/generateAssignedOrders"+c,"text/csv").subscribe(e=>{const t=new Blob([e],{type:"text/csv"});let c=URL.createObjectURL(t),i=document.createElement("a");i.href=c,i.download="assignedOrders.csv",i.click(),setTimeout(()=>{URL.revokeObjectURL(c)},100)})})}addEvent(e,t){this.selectedDate=t.value}}return e.\u0275fac=function(t){return new(t||e)(w.yc(g.b),w.yc(i.e),w.yc(x.a))},e.\u0275cmp=w.sc({type:e,selectors:[["app-spot-orders-page"]],decls:17,vars:6,consts:[["role","heading",1,"page-header"],["appearance","fill",2,"margin-right","10px"],["matInput","",3,"matDatepicker","value","dateInput","dateChange"],["matSuffix","",3,"for"],["picker",""],["mat-raised-button","","color","primary",1,"orders-table-wrapper__transferBtn","inline-block",3,"click"],[1,"tables-wrapper"],[3,"status","transfered","reload"]],template:function(e,t){if(1&e&&(w.Ec(0,"app-layout"),w.Ec(1,"mat-toolbar",0),w.Ec(2,"h1"),w.md(3,"Orders in progress"),w.Dc(),w.Ec(4,"div"),w.Ec(5,"mat-form-field",1),w.Ec(6,"mat-label"),w.md(7,"Orders After:"),w.Dc(),w.Ec(8,"input",2),w.Mc("dateInput",(function(e){return t.addEvent("input",e)}))("dateChange",(function(e){return t.addEvent("change",e)})),w.Dc(),w.zc(9,"mat-datepicker-toggle",3),w.zc(10,"mat-datepicker",null,4),w.Dc(),w.Ec(12,"button",5),w.Mc("click",(function(){return t.generateCsvAssignedOrders()})),w.md(13,"Export assigned orders"),w.Dc(),w.Dc(),w.Dc(),w.Ec(14,"div",6),w.zc(15,"app-orders-table",7),w.Dc(),w.zc(16,"app-footer"),w.Dc()),2&e){const e=w.cd(11);w.lc(8),w.Wc("matDatepicker",e)("value",t.selectedDate),w.lc(1),w.Wc("for",e),w.lc(6),w.Wc("status",t.status)("transfered",!1)("reload",t.reload)}},directives:[S.a,o.a,h.b,h.f,p.b,y.b,y.d,h.g,y.a,r.a,pt,ht.a],styles:[""]}),e})(),vt=(()=>{class e{constructor(e){this.dialog=e,this.status="returned",this.reload=!1}}return e.\u0275fac=function(t){return new(t||e)(w.yc(g.b))},e.\u0275cmp=w.sc({type:e,selectors:[["app-returned-orders-page"]],decls:7,vars:3,consts:[["role","heading",1,"page-header"],[1,"tables-wrapper"],[3,"status","reload","transfered"]],template:function(e,t){1&e&&(w.Ec(0,"app-layout"),w.Ec(1,"mat-toolbar",0),w.Ec(2,"h1"),w.md(3,"Returned orders"),w.Dc(),w.Dc(),w.Ec(4,"div",1),w.zc(5,"app-orders-table",2),w.Dc(),w.zc(6,"app-footer"),w.Dc()),2&e&&(w.lc(5),w.Wc("status",t.status)("reload",t.reload)("transfered",!1))},directives:[S.a,o.a,pt,ht.a],styles:[""]}),e})(),Dt=(()=>{class e{constructor(e){this.dialog=e,this.status="canceled",this.reload=!1}}return e.\u0275fac=function(t){return new(t||e)(w.yc(g.b))},e.\u0275cmp=w.sc({type:e,selectors:[["app-canceled-orders-page"]],decls:7,vars:3,consts:[["role","heading",1,"page-header"],[1,"tables-wrapper"],[3,"status","transfered","reload"]],template:function(e,t){1&e&&(w.Ec(0,"app-layout"),w.Ec(1,"mat-toolbar",0),w.Ec(2,"h1"),w.md(3,"Canceled Orders"),w.Dc(),w.Dc(),w.Ec(4,"div",1),w.zc(5,"app-orders-table",2),w.Dc(),w.zc(6,"app-footer"),w.Dc()),2&e&&(w.lc(5),w.Wc("status",t.status)("transfered",!1)("reload",t.reload))},directives:[S.a,o.a,pt,ht.a],styles:[""]}),e})();const yt=[{path:"pending",component:gt},{path:"spot",component:bt},{path:"finished",component:ft},{path:"returned",component:vt},{path:"transfered",component:(()=>{class e{constructor(){this.status=""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=w.sc({type:e,selectors:[["app-transfered-page"]],decls:7,vars:2,consts:[["role","heading",1,"page-header"],[1,"tables-wrapper"],[3,"status","transfered"]],template:function(e,t){1&e&&(w.Ec(0,"app-layout"),w.Ec(1,"mat-toolbar",0),w.Ec(2,"h1"),w.md(3,"Transfered Orders"),w.Dc(),w.Dc(),w.Ec(4,"div",1),w.zc(5,"app-orders-table",2),w.Dc(),w.zc(6,"app-footer"),w.Dc()),2&e&&(w.lc(5),w.Wc("status",t.status)("transfered",!0))},directives:[S.a,o.a,pt,ht.a],styles:[""]}),e})()},{path:"canceled",component:Dt}];let Et=(()=>{class e{}return e.\u0275mod=w.wc({type:e}),e.\u0275inj=w.vc({factory:function(t){return new(t||e)},imports:[[C.f.forChild(yt)],C.f]}),e})();var Ot=c("PCNd");let Ct=(()=>{class e{}return e.\u0275mod=w.wc({type:e}),e.\u0275inj=w.vc({factory:function(t){return new(t||e)},providers:[G.a,i.e],imports:[[i.c,Et,r.b,a.c,n.a,l.b,m.b,b.b,u.b,h.d,s.b,f.b,E.a,O.a,A.j,g.g,D.b,d.l,o.b,y.c,p.c,Ot.a,v.r,v.i]]}),e})()}}]);